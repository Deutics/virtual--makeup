const lisptickMate = [
  {
    id: 1,
    img: "/Images/lipstik/lipstik_img1.png",
    icon: "/Images/lipstik/lipstick_img1_color.png",
    title: "Powermatte Long Lasting ",
    content: "Transfer-resistant, matte lipstick",
    price: "$200",
  },
  {
    id: 2,
    img: "/Images/lipstik/lipstik_img2.png",
    icon: "/Images/lipstik/lipstick_img2_color.png",
    title: "Matte Lipstick",
    content: "Rich lipstick with high color payoff",
    price: "$200",
  },
  {
    id: 3,
    img: "Images/lipstik/lipstick_img10.png",
    icon: "Images/lipstik/lipstick_img10_color.png",
    title: "Matte Refillable Lipstick ",
    content: "Transfer-resistant, matte lipstick ",
    price: "$200",
  },
  {
    id: 4,
    img: "/Images/lipstik/lipstik_img4.png",
    icon: "/Images/lipstik/lipstick_img4_color.png",
    title: "Velvet Matte Lipstick",
    content: "Transfer-resistant, matte lipstick",
    price: "$200",
  },
  {
    id: 5,
    img: "Images/lipstik/lipstik_img5.png",
    icon: "Images/lipstik/lipstick_img5_color.png",
    title: "Powermatte Long Lasting",
    content: "Transfer-resistant, matte lipstick",
    price: "$200",
  },
  {
    id: 6,
    img: "/Images/lipstik/lipstik_img6.png",
    icon: "/Images/lipstik/lipstick_img3_color.png",
    title: "Kind Words Matte Lipstick",
    content: "Transfer-resistant, matte lipstick",
    price: "$200",
  },
  {
    id: 7,
    img: "/Images/lipstik/lipstik_img7.png",
    icon: "Images/lipstik/lipstick_img5_color.png",
    title: "Powermatte Long Lasting",
    content: "Transfer-resistant, matte lipstick",
    price: "$200",
  },
  {
    id: 8,
    img: "/Images/lipstik/lipstik_img8.png",
    icon: "/Images/lipstik/lipstick_img5_color.png",
    title: "Kind Words Matte Lipstick",
    content: "Transfer-resistant, matte lipstick",
    price: "$200",
  },
  {
    id: 9,
    img: "Images/lipstik/lipstick_img11.png",
    icon: "/Images/lipstik/lipstick_img11_color.png",
    title: "Velvet Matte Lipstick",
    content: "Transfer-resistant, matte lipstick",
    price: "$200",
  },
];

const EyeshadowMatte = [
  {
    id: 1,
    img: "Images/Eyeshadow/Eyeshadow_Img1.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon1.png",
    title: "Brown Script ",
    content: "Long Lasting Multi Reflective with Matte",
    price: "$200",
  },
  {
    id: 2,
    img: "Images/Eyeshadow/Eyeshadow_Img2.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon2.png",
    title: "Matte Eyeshadow",
    content: "Rich Eyeshadow with Matte Finish",
    price: "$200",
  },
  {
    id: 3,
    img: "Images/Eyeshadow/Eyeshadow_Img3.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon3.png",
    title: "Refillable Pro Palette ",
    content: "Pro Palette Refillable Eyeshadow ",
    price: "$200",
  },
  {
    id: 4,
    img: "Images/Eyeshadow/Eyeshadow_Img4.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon4.png",
    title: "Vanilla Matte",
    content: "Vanilla Nut Matte Eyeshadow",
    price: "$200",
  },
  {
    id: 5,
    img: "Images/Eyeshadow/Eyeshadow_Img5.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon5.png",
    title: "Colourful Eyeshadow",
    content: "New Collection Colourful Eyeshadow",
    price: "$200",
  },
  {
    id: 6,
    img: "Images/Eyeshadow/Eyeshadow_Img6.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon6.png",
    title: "Natural Translucent",
    content: "Buttery Pigment-Rich Matte Foundation",
    price: "$200",
  },
];

const BlushLiquid = [
  {
    id: 1,
    img: "Images/Blush/blush_Img1.png",
    icon: "Images/Blush/blush_Img_Icon1.png",
    title: "Pure Pressed Blush",
    content: "Refreshing Wash of Colour",
    price: "$200",
  },
  {
    id: 2,
    img: "Images/Blush/blush_Img2.png",
    icon: "Images/Blush/blush_Img_Icon2.png",
    title: "Blush Cashmere Pressed",
    content: "Prestige Blend of Natural",
    price: "$200",
  },
  {
    id: 3,
    img: "Images/Blush/blush_Img3.png",
    icon: "Images/Blush/blush_Img_Icon3.png",
    title: "Matte High Pigment Pressed",
    content: "Long-lasting Colorful, Blends Easily, Lightweight",
    price: "$200",
  },
  {
    id: 4,
    img: "Images/Blush/blush_Img4.png",
    icon: "Images/Blush/blush_Img_Icon4.png",
    title: "Pressed Blush Peach",
    content: "Highly Pigmented; Kind to Skin",
    price: "$200",
  },
  {
    id: 5,
    img: "Images/Blush/blush_Img5.png",
    icon: "Images/Blush/blush_Img_Icon5.png",
    title: "Rouge Red Pressed",
    content: "Sheer-To-Buildable Powder Blush",
    price: "$200",
  },
  {
    id: 6,
    img: "Images/Blush/blush_Img6.png",
    icon: "Images/Blush/blush_Img_Icon6.png",
    title: "Pressed Mineral",
    content: "Natural Pigment Long Lasting Blush",
    price: "$200",
  },
];
const FoundationLiquid = [
  {
    id: 1,
    img: "Images/Foundation/foundation_Img1.png",
    icon: "Images/Foundation/foundation_Img_Icon1.png",
    title: "Dream Radiant",
    content: "Transfer-resistant, liquid foundation",
    price: "$200",
  },
  {
    id: 2,
    img: "Images/Foundation/foundation_Img2.png",
    icon: "Images/Foundation/foundation_Img_Icon2.png",
    title: "New York",
    content: "Fit Me Matte + Poreless Foundation",
    price: "$200",
  },
  {
    id: 3,
    img: "Images/Foundation/foundation_Img3.png",
    icon: "Images/Foundation/foundation_Img_Icon3.png",
    title: "Sheer Foundation",
    content: "Hydrating Natural Foundation ",
    price: "$200",
  },
  {
    id: 4,
    img: "Images/Foundation/foundation_Img4.png",
    icon: "Images/Foundation/foundation_Img_Icon4.png",
    title: "Catrice Liquid Coverage",
    content: "HD Liquid Mattifying Foundation",
    price: "$200",
  },
  {
    id: 5,
    img: "Images/Foundation/foundation_Img5.png",
    icon: "Images/Foundation/foundation_Img_Icon5.png",
    title: "Flawless Liquid",
    content: "Matte Flawless Foundation",
    price: "$200",
  },
  {
    id: 6,
    img: "Images/Foundation/foundation_Img6.png",
    icon: "Images/Foundation/foundation_Img_Icon6.png",
    title: "Flawless Finish",
    content: "Buttery pigment-rich soft Matte Foundation",
    price: "$200",
  },
];

const ConcealerLiquid = [
  {
    id: 1,
    img: "Images/Eyeshadow/Eyeshadow_Img1.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon1.png",
    title: "Brown Script ",
    content: "Long Lasting Multi Reflective with Matte",
    price: "$200",
  },
  {
    id: 2,
    img: "Images/Eyeshadow/Eyeshadow_Img2.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon2.png",
    title: "Matte Eyeshadow",
    content: "Rich Eyeshadow with Matte Finish",
    price: "$200",
  },
  {
    id: 3,
    img: "Images/Eyeshadow/Eyeshadow_Img3.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon3.png",
    title: "Refillable Pro Palette ",
    content: "Pro Palette Refillable Eyeshadow ",
    price: "$200",
  },
  {
    id: 4,
    img: "Images/Eyeshadow/Eyeshadow_Img4.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon4.png",
    title: "Vanilla Matte",
    content: "Vanilla Nut Matte Eyeshadow",
    price: "$200",
  },
  {
    id: 5,
    img: "Images/Eyeshadow/Eyeshadow_Img5.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon5.png",
    title: "Colourful Eyeshadow",
    content: "New Collection Colourful Eyeshadow",
    price: "$200",
  },
  {
    id: 6,
    img: "Images/Eyeshadow/Eyeshadow_Img6.png",
    icon: "Images/Eyeshadow/Eyeshadow_Img_Icon6.png",
    title: "Natural Translucent",
    content: "Buttery Pigment-Rich Matte Foundation",
    price: "$200",
  },
];

function scrollToSection(sectionId) {
  const section = document.getElementById(sectionId);
  if (section) {
    section.scrollIntoView({ behavior: "smooth" });
  }
}

function showLandingPageSection(sectionId, button) {
  const landingSections = document.querySelectorAll(".LandingPageContainer");
  landingSections.forEach((section) => {
    section.style.display = "none";
  });

  const selectedLandingSection = document.getElementById(sectionId);
  if (selectedLandingSection) {
    selectedLandingSection.style.display = "block";
    localStorage.setItem("selectedLandingSection", sectionId);
  }

  if (button) {
    button.classList.add("selectedlandingpage");
    localStorage.setItem(
      "selectedButtonlandingpage",
      button.getAttribute("href")
    );
  }

  window.history.pushState(null, null, `#${sectionId}`);

  scrollToSection(sectionId);
}

function setSelectedSection(sectionId, button) {
  showSection(sectionId, button);
}

let selectedLipsticksArray = [];

function showSection(sectionId, button) {
  // Hide all sections
  const sections = document.querySelectorAll(".MainContianer");
  sections.forEach((section) => {
    section.style.display = "none";
  });

  // Remove the "selected" class from all buttons
  const buttons = document.querySelectorAll(".Sidebar_InnerContainer a");
  buttons.forEach((btn) => {
    btn.classList.remove("selected");
  });

  // Show the selected SideBar section
  const selectedSection = document.getElementById(sectionId);
  if (selectedSection) {
    selectedSection.style.display = "block";
    localStorage.setItem("selectedSection", sectionId);
  }

  // Add the "selected Side Bar Border Button" class to the clicked button
  if (button) {
    button.classList.add("selected");
    localStorage.setItem("selectedButton", button.getAttribute("href"));
  }
  //Give the selected path in the URL
  window.history.pushState(null, null, `#${sectionId}`);
}
// Store the selectd Side Bar section and Selected Side Bar Border button in local storage
const storedSection = localStorage.getItem("selectedSection");
const storedButton = localStorage.getItem("selectedButton");

if (storedSection) {
  showSection(storedSection);
}

// Restore the selected Side Bar  buttons border after the page is refreshed
if (storedButton) {
  const buttons = document.querySelectorAll(".Sidebar_InnerContainer a");
  buttons.forEach((btn) => {
    if (btn.getAttribute("href") === storedButton) {
      btn.classList.add("selected");
    }
  });
}

function showLipstickSection(sectionId, button) {
  // Hide all sections
  const sections = document.querySelectorAll(".LipstickContent");
  sections.forEach((section) => {
    section.style.display = "none";
  });

  // Remove the "selected Lipstick Container Categories" class from all buttons
  const buttons = document.querySelectorAll(".LipstickContainerCategories a");
  buttons.forEach((btn) => {
    btn.classList.remove("selectedlipstick");
  });

  // Show the selected section
  const selectedSectionlipstick = document.getElementById(sectionId);
  if (selectedSectionlipstick) {
    selectedSectionlipstick.style.display = "flex";
    localStorage.setItem("selectedSectionlipstick", sectionId);
  }

  // Add the "selected  Lipstick Categories" class to the clicked button
  if (button) {
    button.classList.add("selectedlipstick");
    localStorage.setItem("selectedButtonlipstick", button.getAttribute("href"));
  }
  window.history.pushState(null, `#lipstick-${sectionId}`);
}

// Store the selectd  lipstick section and selected listick hover button in local storage
const storedSectionlipstick = localStorage.getItem("selectedSectionlipstick");
const storedButtonlipstick = localStorage.getItem("selectedButtonlipstick");

if (storedSectionlipstick) {
  showLipstickSection(storedSectionlipstick);
}

// Restore the selected Lipstick Container Categories and selected buttons border after the page is refreshed
if (storedButtonlipstick) {
  const buttons = document.querySelectorAll(".LipstickContainerCategories a");
  buttons.forEach((btn) => {
    if (btn.getAttribute("href") === storedButtonlipstick) {
      btn.classList.add("selectedlipstick");
    }
  });
}

// Helper function to display the selected lipstick in the addToCart section
function displaySelectedLipstick(img, icon, title, price, index) {
  const addToCartSection = document.querySelector(".addToCart");

  // Create a new div to hold each selected lipstick
  const selectedLipstickDiv = document.createElement("div");
  selectedLipstickDiv.classList.add("selectedLipstickInfo");

  // Populate the div with the selected lipstick data
  selectedLipstickDiv.innerHTML = `
    <div class="lipstickInfo">
      <img class="addToCartImg" src="${img}" />
      <img class="addToCartIcon" src="${icon}" />
      <div class=" lipstick_Details" >
      <h4>${title}</h4>
      <p >${price}</p>
      </div>
      <div class="deleteButton" data-index="${index}"><img class="delete_icon" src="/Images/Icons/detele_Icon.png" /></div>
      </div>
     
  `;

  const deleteButton = selectedLipstickDiv.querySelector(".deleteButton");
  deleteButton.addEventListener("click", () => {
    // Get the index of the selected lipstick from the data-index attribute
    const indexToRemove = parseInt(deleteButton.getAttribute("data-index"), 10);

    // Call the function to remove the selected lipstick from the array and update the display
    removeSelectedLipstick(selectedLipstickDiv, indexToRemove);
  });

  // Append the div to the addToCartSection
  addToCartSection.appendChild(selectedLipstickDiv);
  generateCartModelContent();
}

function removeSelectedLipstick(selectedLipstickDiv, indexToRemove) {
  const addToCartSection = document.querySelector(".addToCart");

  // Remove the selected lipstick div from the addToCartSection
  addToCartSection.removeChild(selectedLipstickDiv);
  // cartItemsContainer.removeChild(cartItemDiv);

  // Remove the selected lipstick from the array
  selectedLipsticksArray.splice(indexToRemove, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedLipsticksArray",
    JSON.stringify(selectedLipsticksArray)
  );
  generateCartModelContent();
}
function removeSelectedCartLipstick(cartItemDiv, indexToRemove) {
  const cartItemsContainer = document.querySelector(".cart-items");
  const addToCartSection = document.querySelector(".addToCart");

  // Remove the selected lipstick div from the cart-items section
  cartItemsContainer.removeChild(cartItemDiv);

  // Remove the selected lipstick div from the addToCart section
  const addToCartItems = addToCartSection.querySelectorAll(
    ".selectedLipstickInfo"
  );
  if (addToCartItems.length > indexToRemove) {
    addToCartSection.removeChild(addToCartItems[indexToRemove]);
  }

  // Remove the selected lipstick from the array
  selectedLipsticksArray.splice(indexToRemove, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedLipsticksArray",
    JSON.stringify(selectedLipsticksArray)
  );

  // Regenerate the cart items and update the total price in the modal
  generateCartModelContent();
}

// Responsibale to send data in the cart
function handleLipstickImageClick(img, icon, title, price) {
  // Clear local storage and the UI if a lipstick is already selected
  if (selectedLipsticksArray?.length > 0) {
    selectedLipsticksArray = [];
    const addToCartSection = document.querySelector(".addToCart");
    addToCartSection.innerHTML = "";
    localStorage.removeItem("selectedLipsticksArray"); // Clear local storage
  }

  // Call the function to display the selected lipstick in the addToCart section
  displaySelectedLipstick(
    img,
    icon,
    title,
    price,
    selectedLipsticksArray.length
  );

  // Add the selected lipstick data to the array
  const selectedItemData = {
    img: img,
    icon: icon,
    title: title,
    price: price,
  };
  selectedLipsticksArray.push(selectedItemData);

  // Store the updated Add to Cart array in localStorage
  localStorage.setItem(
    "selectedLipsticksArray",
    JSON.stringify(selectedLipsticksArray)
  );

  // generateMateLipstickContent();
  // generateCartModelContent();
}

function displaySelectedLipstickOnLoad() {
  // Retrieve the selected lipsticks Add to Cart from localStorage
  const storedLipsticks = localStorage.getItem("selectedLipsticksArray");
  if (storedLipsticks) {
    selectedLipsticksArray = JSON.parse(storedLipsticks);

    // Display each selected lipstick in the addToCart section
    selectedLipsticksArray.forEach((lipstickData, index) => {
      displaySelectedLipstick(
        lipstickData.img,
        lipstickData.icon,
        lipstickData.title,
        lipstickData.price,
        index
      );
    });
  }
}
displaySelectedLipstickOnLoad();

function generateMateLipstickContent() {
  const mateLipstickContainer = document.getElementById("mate");

  const mateLipstickHTML = lisptickMate
    .map(
      (item) => `
    <div class="lipstickItem"  
    onclick="handleLipstickImageClick( '${item.img}',
    '${item.icon}', '${item.title}', '${item.price}')" >
      <img class="img" src=${item.img} />
      <img class="icon" src="${item.icon}"/>
      <h3>${item.title}</h3>
      <p>${item.content}</p>
    </div>
  `
    )
    .join("");

  mateLipstickContainer.innerHTML = mateLipstickHTML;
}

generateMateLipstickContent();

function generateCartModelContent() {
  const cartItemsContainer = document.querySelector(".cart-items");
  cartItemsContainer.innerHTML = ""; // Clear previous content

  // Iterate through the selected lipsticks array and create HTML elements for each selected lipstick
  selectedLipsticksArray.forEach((ItemData, index) => {
    const cartItemDiv = document.createElement("div");
    cartItemDiv.classList.add("cart-item");
    cartItemDiv.innerHTML = `
      <div class="cart-item-info">
        <img class="cart-item-img" src="${ItemData.img}" />
        <img class="cart-item-icon" src="${ItemData.icon}" />
        <h4>${ItemData.title}</h4>
        <p>${ItemData.price}</p>
      </div>
      <div class="deleteButtonCart" data-index="${index}"><img class="delete_icon" src="/Images/Icons/detele_Icon.png" /></div>
    </div>
  `;

    const deleteCartButton = cartItemDiv.querySelector(".deleteButtonCart");
    deleteCartButton.addEventListener("click", () => {
      // Get the index of the selected lipstick from the data-index attribute
      const indexToRemove = parseInt(
        deleteCartButton.getAttribute("data-index"),
        10
      );
      // Call the function to remove the selected lipstick from the array and update the display
      removeSelectedCartLipstick(cartItemDiv, indexToRemove);
    });

    cartItemsContainer.appendChild(cartItemDiv);
  });

  // Calculate and display the total price
  const totalPriceElement = document.getElementById("totalPrice");
  let totalPrice = 0;
  selectedLipsticksArray.forEach((lipstick) => {
    totalPrice += parseInt(lipstick.price.slice(1));
  });
  totalPriceElement.textContent = `$${totalPrice}`;
}

// Call the function when the DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  const storedSection = localStorage.getItem("selectedSection");
  const storedButton = localStorage.getItem("selectedButton");
  const storedButtonLanding = localStorage.getItem("selectedButtonlandingpage");
  // if (!storedButtonLanding) {
  //   window.location.href = "LandingPage.html";
  // }else{
  //   showSection("aibeauty");
  // }
  if (storedButton && storedSection) {
    const selectedButton = document.querySelector(
      `.Sidebar_InnerContainer a[href="${storedButton}"]`
    );
    showSection(storedSection, selectedButton);
    showLandingPageSection(storedButtonLanding);
  } else {
    showSection("aibeauty"); // Default selection if no data is stored

    // Add the border to the default selected button "aibeauty"
    const defaultSelectedButton = document.querySelector(
      '.Sidebar_InnerContainer a[href="#aibeauty"]'
    );
    defaultSelectedButton.classList.add("selected");
  }

  // For Lipstick Container Categories

  const storedSectionlipstick = localStorage.getItem("selectedSectionlipstick");
  const storedButtonlipstick = localStorage.getItem("selectedButtonlipstick");
  if (storedSectionlipstick && storedButtonlipstick) {
    const selectedButtonlipstick = document.querySelector(
      `.LipstickContainerCategories a[href="${storedButtonlipstick}"]`
    );
    showLipstickSection(storedSectionlipstick, selectedButtonlipstick);
  } else {
    showLipstickSection("mate"); // Default selection if no data is stored
    // Add the border to the default selectedlipstick buttton "Lipstick"
    const defaultSelectedlipstick = document.querySelector(
      '.LipstickContainerCategories a[href="#mate"]'
    );
    defaultSelectedlipstick.classList.add("selectedlipstick");
  }
  generateCartModelContent();

  // Event listener to open the modal when the "Add to Cart" button is clicked
  const addToCartButton = document.querySelector(".addToCartButton");
  addToCartButton.addEventListener("click", () => {
    if (selectedLipsticksArray?.length === 0) {
      const emptyCartMessage = document.getElementById("emptyCartMessage");
      emptyCartMessage.style.display = "block";

      // Hide the message after a short delay
      setTimeout(() => {
        emptyCartMessage.style.display = "none";
      }, 2000);
    } else {
      openCartModal();
      toggleCartModal();
    }
  });
});

document.addEventListener("DOMContentLoaded", () => {
  const sidebarMainContainer = document.querySelector(".Sidebar_MainContainer");
  const toggleButton = document.createElement("div");
  toggleButton.classList.add("toggle-button");
  toggleButton.innerHTML = `
    <div class="toggle-line"></div>
    <div class="toggle-line"></div>
    <div class="toggle-line"></div>
  `;

  document.body.appendChild(toggleButton);

  function removeToggleLines() {
    const toggleLines = toggleButton.querySelectorAll(".toggle-line");
    toggleLines.forEach((line) => {
      line.style.display = "none";
    });
  }

  function addToggleLines() {
    const toggleLines = toggleButton.querySelectorAll(".toggle-line");
    toggleLines.forEach((line) => {
      line.style.display = "block";
    });
  }

  function addArrowButton() {
    const arrowButton = document.createElement("div");
    arrowButton.classList.add("arrow-button");
    arrowButton.innerHTML = "&#8592;";
    toggleButton.appendChild(arrowButton);
  }

  function removeArrowButton() {
    const arrowButton = toggleButton.querySelector(".arrow-button");
    if (arrowButton) {
      toggleButton.removeChild(arrowButton);
    }
  }

  toggleButton.addEventListener("click", () => {
    sidebarMainContainer.classList.toggle("active");

    if (sidebarMainContainer.classList.contains("active")) {
      removeToggleLines();
      addArrowButton();
    } else {
      removeArrowButton();
      addToggleLines();
    }
  });
});

function closeAndToggleCartModal() {
  closeCartModal();
  toggleCartModal();
}

// Function to toggle the blur effect on the background elements
function toggleBlurBackground() {
  const cartModal = document.getElementById("cartModal");
  const backgroundElements = document.querySelectorAll(".blur");

  function handleBackgroundClick(event) {
    if (event.target === cartModal) {
      closeAndToggleCartModal();
    }
  }

  if (cartModal.classList.contains("active")) {
    backgroundElements.forEach((element) => {
      element.classList.add("blur-background");
      element.classList.add("unselectable");
      element.style.pointerEvents = "none";
      element.addEventListener("click", handleBackgroundClick);
    });
  } else {
    backgroundElements.forEach((element) => {
      element.classList.remove("blur-background");
      element.classList.remove("unselectable");
      element.style.pointerEvents = "auto";
      element.removeEventListener("click", handleBackgroundClick);
    });
  }
}

window.addEventListener("click", (event) => {
  const cartModal = document.getElementById("bbbb");
  // Check if the clicked element is outside the modal
  if (event.target == cartModal) {
    closeCartModal();
    toggleCartModal();
  }
});

// Function to open the cart modal
function openCartModal() {
  const cartModal = document.getElementById("cartModal");
  cartModal.style.display = "block";
  document.body.style.overflow = "hidden";
  toggleBlurBackground();
  generateCartModelContent();
}

function closeEmptyCartModal() {
  const emptyCartModal = document.getElementById("emptyCartModal");
  emptyCartModal.style.display = "none";
}

// Event listener to open the modal when the "Add to Cart" button is clicked
document.addEventListener("DOMContentLoaded", () => {
  const addToCartButton = document.querySelector(".addToCartButton");
  addToCartButton.addEventListener("click", () => {
    if (selectedLipsticksArray.length <= 0) {
      const emptyCartModal = document.getElementById("emptyCartModal");
      emptyCartModal.style.display = "block";

      setTimeout(() => {
        emptyCartModal.style.display = "none";
      }, 3000);
    } else {
      openCartModal();
    }
  });
});

// Function to close the cart modal
function closeCartModal() {
  const cartModal = document.getElementById("cartModal");
  cartModal.style.display = "none";
  document.body.style.overflow = "auto";
  toggleBlurBackground();
}

function toggleCartModal() {
  const cartModal = document.getElementById("cartModal");
  const toggleButton = document.querySelector(".toggle-button");
  cartModal.classList.toggle("active");
  toggleButton.style.display = cartModal.classList.contains("active")
    ? "none"
    : "block";

  if (cartModal.classList.contains("active")) {
    cartModal.style.display = "block";
  } else {
    cartModal.style.display = "none";
  }

  toggleBlurBackground();
}
function toggleOrderModal() {
  const orderModal = document.getElementById("orderModal");
  const toggleButton = document.querySelector(".toggle-button");
  orderModal.classList.toggle("active");
  toggleButton.style.display = orderModal.classList.contains("active")
    ? "none"
    : "block";

  if (orderModal.classList.contains("active")) {
    orderModal.style.display = "block";
  } else {
    orderModal.style.display = "none";
  }

  toggleBlurBackground();
}
function togglePaymentModal() {
  const paymentModal = document.getElementById("paymentModal");
  const toggleButton = document.querySelector(".toggle-button");
  paymentModal.classList.toggle("active");
  toggleButton.style.display = paymentModal.classList.contains("active")
    ? "none"
    : "block";

  if (paymentModal.classList.contains("active")) {
    paymentModal.style.display = "block";
  } else {
    paymentModal.style.display = "none";
  }

  toggleBlurBackground();
}

// Event listener to close the modal when the "Close" button (x) is clicked
const closeButton = document.querySelector(".close");
closeButton.addEventListener("click", () => {
  closeAndToggleCartModal();
});

const closeArrowCartButton = document.querySelector(".ArrowCart");
closeArrowCartButton.addEventListener("click", () => {
  closeCartModal();
  toggleCartModal();
});
const closeArrowOrderButton = document.querySelector(".ArrowOrder");
closeArrowOrderButton.addEventListener("click", () => {
  closeOrderModal();
  removeToggleLines();
  toggleOrderModal();
});
const closeArrowPaymentButton = document.querySelector(".ArrowPyment");
closeArrowPaymentButton.addEventListener("click", () => {
  closePaymentModal();
  removeToggleLines();
  togglePaymentModal();
});

// Function to place the order
function openOrderModal() {
  // closeCartModal();
  const orderModal = document.getElementById("orderModal");
  orderModal.style.display = "block";
}

function closeOrderModal() {
  const orderModal = document.getElementById("orderModal");
  orderModal.style.display = "none";
  openCartModal();
}

function submitOrder() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModal();
}

function openPaymentModal() {
  closeCartModal();
  const orderModal = document.getElementById("paymentModal");
  orderModal.style.display = "block";
}

function closePaymentModal() {
  const orderModal = document.getElementById("paymentModal");
  orderModal.style.display = "none";
}
function openPaynowModal() {
  const orderModal = document.getElementById("payNow");
  orderModal.style.display = "block";
}

function closePaynowModal() {
  const orderModal = document.getElementById("payNow");
  orderModal.style.display = "none";
}

function submitPayment() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModal();
}

function submitPaynowbtn() {
  const modals = document.getElementsByClassName("modal");
  for (const modal of modals) {
    modal.style.display = "none";
  }

  // Remove the blur effect on the background elements
  const backgroundElements = document.querySelectorAll(".blur");
  backgroundElements.forEach((element) => {
    element.classList.remove("blur-background");
    element.classList.remove("unselectable");
    element.style.pointerEvents = "auto";
  });

  // Clear the selected lipsticks array and remove the lipsticks from the addToCart section
  selectedLipsticksArray = [];
  const addToCartSection = document.querySelector(".addToCart");
  addToCartSection.innerHTML = "";
  localStorage.removeItem("selectedLipsticksArray"); // Clear local storage

  toggleCartModal();
}

// video = document.getElementById("videoElement");
// if (navigator.mediaDevices.getUserMedia) {
//   navigator.mediaDevices.getUserMedia({ video: true }).then(function (stream) {
//     video.srcObject = stream;
//   });
// }

// // run face-mesh model once the video is ready for processing
// main();

// function main() {
//   // check if the video is loaded and ready for processing
//   if (video.readyState == 4) {
//     get_facemesh();
//     sendFrame();
//   } else {
//     setTimeout(main, 1000 / 60);
//   }
// }

// ...................eyeshadow js here ................//

let selectedEyeshadowArray = [];
function showEyeshadowSection(sectionId, button) {
  // Hide all sections
  const sectionsEyeshadow = document.querySelectorAll(".eyeshadowContent");
  sectionsEyeshadow.forEach((section) => {
    section.style.display = "none";
  });

  // Remove the "selected Lipstick Container Categories" class from all buttons
  const buttonsEyeshadow = document.querySelectorAll(
    ".eyeshadowContainerCategories a"
  );
  buttonsEyeshadow.forEach((btn) => {
    btn.classList.remove("selectedEyeshadow");
  });

  // Show the selected section
  const selectedSectionEyeshadow = document.getElementById(sectionId);
  if (selectedSectionEyeshadow) {
    selectedSectionEyeshadow.style.display = "flex";
    localStorage.setItem("selectedSectionEyeshadow", sectionId);
  }

  // Add the "selected  eyeshadow Categories" class to the clicked button
  if (button) {
    button.classList.add("selectedEyeshadow");
    localStorage.setItem(
      "selectedButtoneyeshadow",
      button.getAttribute("href")
    );
  }
  window.history.pushState(null, `#eyeshadow${sectionId}`);
}

// Store the selectd  lipstick section and selected listick hover button in local storage
const storedSectioneyeshadow = localStorage.getItem("selectedSectionEyeshadow");
const storedButtoneyeshadow = localStorage.getItem("selectedButtoneyeshadow");

if (storedSectioneyeshadow) {
  showEyeshadowSection(storedSectioneyeshadow);
}

// Restore the selected eyeshadow Container Categories and selected buttons border after the page is refreshed
if (storedButtoneyeshadow) {
  const buttonsEyeshadow = document.querySelectorAll(
    ".eyeshadowContainerCategories a"
  );
  buttonsEyeshadow.forEach((btn) => {
    if (btn.getAttribute("href") === storedButtoneyeshadow) {
      btn.classList.add("selectedEyeshadow");
    }
  });
}

// Helper function to display the selected eyeshadow in the addToCart section
function displaySelectedEyeshadow(img, icon, title, price, index) {
  const addToCartSectionEyeshadow = document.querySelector(
    ".addToCartEyeshadow"
  );

  // Create a new div to hold each selected eyeshadow
  const selectedEyeshadowDiv = document.createElement("div");
  selectedEyeshadowDiv.classList.add("selectedEyeshadowInfo");

  // Populate the div with the selected eyeshadow data
  selectedEyeshadowDiv.innerHTML = `
    <div class="lipstickInfo">
      <img class="addToCartImg" src="${img}" />
      <img class="addToCartIcon" src="${icon}" />
      <div class="Eyeshadow_Details">
        <h4>${title}</h4>
        <p>${price}</p>
      </div>
      <div class="deleteButtoneyeshadow" data-index="${index}">
        <img class="delete_icon" src="/Images/Icons/detele_Icon.png" />
      </div>
    </div>
  `;

  const deleteButtoneyeshadow = selectedEyeshadowDiv.querySelector(
    ".deleteButtoneyeshadow"
  );
  deleteButtoneyeshadow.addEventListener("click", () => {
    // Get the index of the selected eyeshadow from the data-index attribute
    const indexToRemoveEyeshadow = parseInt(
      deleteButtoneyeshadow.getAttribute("data-index"),
      10
    );

    // Remove the selected eyeshadow from the array and update the display
    removeSelectedEyeshadow(selectedEyeshadowDiv, indexToRemoveEyeshadow);
  });

  // Append the div to the addToCartSection
  addToCartSectionEyeshadow.appendChild(selectedEyeshadowDiv);
}

function removeSelectedEyeshadow(selectedEyeshadowDiv, indexToRemoveEyeshadow) {
  const addToCartSectionEyeshadow = document.querySelector(
    ".addToCartEyeshadow"
  );

  // Remove the selected Eyeshadow div from the addToCartSection
  addToCartSectionEyeshadow.removeChild(selectedEyeshadowDiv);
  // cartItemsContainer.removeChild(cartItemDiv);

  // Remove the selected Eyeshadow from the array
  selectedEyeshadowArray.splice(indexToRemoveEyeshadow, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedEyeshadowArray",
    JSON.stringify(selectedEyeshadowArray)
  );
  generateCartModelEyeshadowContent();
}

function removeSelectedCartEyeshadow(
  cartItemEyeshadowDiv,
  indexToRemoveEyeshadow
) {
  const cartItemsContainerEyeshadow = document.querySelector(
    ".cart-items-Eyeshadow"
  );
  const addToCartSectionEyeshadow = document.querySelector(
    ".addToCartEyeshadow"
  );

  // Remove the selected Eyeshadow div from the cart-items section
  cartItemsContainerEyeshadow.removeChild(cartItemEyeshadowDiv);

  // Remove the selected Eyeshadow div from the addToCart section
  const addToCartItemsEyeshadow = addToCartSectionEyeshadow.querySelectorAll(
    ".selectedEyeshadowInfo"
  );
  if (addToCartItemsEyeshadow.length > indexToRemoveEyeshadow) {
    addToCartSectionEyeshadow.removeChild(
      addToCartItemsEyeshadow[indexToRemoveEyeshadow]
    );
  }

  // Remove the selected Eyeshadow from the array
  selectedEyeshadowArray.splice(indexToRemoveEyeshadow, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedEyeshadowArray",
    JSON.stringify(selectedEyeshadowArray)
  );

  // Regenerate the cart items and update the total price in the modal
  generateCartModelEyeshadowContent();
}

function handleEyeshadowImageClick(img, icon, title, price) {
  // Clear local storage and the UI if a Eyeshadow is already selected
  if (selectedEyeshadowArray?.length > 0) {
    selectedEyeshadowArray = [];
    const addToCartSectionEyeshadow = document.querySelector(
      ".addToCartEyeshadow"
    );
    addToCartSectionEyeshadow.innerHTML = "";
    localStorage.removeItem("selectedEyeshadowArray"); // Clear local storage
  }

  // Call the function to display the selected Eyeshadow in the addToCart section
  displaySelectedEyeshadow(
    img,
    icon,
    title,
    price,
    selectedEyeshadowArray.length
  );

  // Add the selected Eyeshadow data to the array
  const selectedItemData = {
    img: img,
    icon: icon,
    title: title,
    price: price,
  };
  selectedEyeshadowArray.push(selectedItemData);

  // Store the updated Add to Cart array in localStorage
  localStorage.setItem(
    "selectedEyeshadowArray",
    JSON.stringify(selectedEyeshadowArray)
  );
}

function displaySelectedEyeshadowOnLoad() {
  // Retrieve the selected eyeshadows Add to Cart from localStorage
  const storedEyeshadow = localStorage.getItem("selectedEyeshadowArray");
  if (storedEyeshadow) {
    selectedEyeshadowArray = JSON.parse(storedEyeshadow);

    // Display each selected eyeshadow in the addToCart section
    selectedEyeshadowArray.forEach((eyeshadowData, index) => {
      displaySelectedEyeshadow(
        eyeshadowData.img,
        eyeshadowData.icon,
        eyeshadowData.title,
        eyeshadowData.price,
        index
      );
    });
  }
}

displaySelectedEyeshadowOnLoad();

function generateMatteEyeshadowContent() {
  const matteEyeshadowContainer = document.getElementById("eyeshadow_matte");

  const mateEyeshadowHTML = EyeshadowMatte.map(
    (item) => `
    <div class="lipstickItem"  
    onclick="handleEyeshadowImageClick( '${item.img}',
    '${item.icon}', '${item.title}', '${item.price}')" >
      <img class="img" src=${item.img} />
      <img class="icon" src="${item.icon}"/>
      <h3>${item.title}</h3>
      <p>${item.content}</p>
    </div>
  `
  ).join("");

  matteEyeshadowContainer.innerHTML = mateEyeshadowHTML;
}

generateMatteEyeshadowContent();

function generateCartModelEyeshadowContent() {
  const cartItemsContainerEyeshadow = document.querySelector(
    ".cart-items-Eyeshadow"
  );
  cartItemsContainerEyeshadow.innerHTML = ""; // Clear previous content

  // Iterate through the selected Eyeshadow array and create HTML elements for each selected Eyeshadow
  selectedEyeshadowArray.forEach((ItemData, index) => {
    const cartItemDivEyeshadow = document.createElement("div");
    cartItemDivEyeshadow.classList.add("cart-item-Eyeshadow");
    cartItemDivEyeshadow.innerHTML = `
      <div class="cart-item-info">
        <img class="cart-item-img" src="${ItemData.img}" />
        <img class="cart-item-icon" src="${ItemData.icon}" />
        <h4>${ItemData.title}</h4>
        <p>${ItemData.price}</p>
      </div>
      <div class="deleteButtonCartEyeshadow" data-index="${index}"><img class="delete_icon" src="/Images/Icons/detele_Icon.png" /></div>
    </div>
  `;

    const deleteCartButtonEyeshadow = cartItemDivEyeshadow.querySelector(
      ".deleteButtonCartEyeshadow"
    );
    deleteCartButtonEyeshadow.addEventListener("click", () => {
      // Get the index of the selected Eyeshadow from the data-index attribute
      const indexToRemoveEyeshadow = parseInt(
        deleteCartButtonEyeshadow.getAttribute("data-index"),
        10
      );
      // Call the function to remove the selected Eyeshadow from the array and update the display
      removeSelectedCartEyeshadow(cartItemDivEyeshadow, indexToRemoveEyeshadow);
    });

    cartItemsContainerEyeshadow.appendChild(cartItemDivEyeshadow);
  });

  // Calculate and display the total price
  const totalPriceElementEyeshadow = document.getElementById(
    "totalPriceeyeshadow"
  );
  let totalPriceEyeshadow = 0;
  selectedEyeshadowArray.forEach((Eyeshadow) => {
    totalPriceEyeshadow += parseInt(Eyeshadow.price.slice(1));
  });
  totalPriceElementEyeshadow.textContent = `$${totalPriceEyeshadow}`;
}

// Call the function when the DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  //   // For Eyeshadow Container Categories

  const storedSectionEyeshadow = localStorage.getItem(
    "selectedSectionEyeshadow"
  );
  const storedButtonEyeshadow = localStorage.getItem("selectedButtonEyeshadow");
  if (storedSectionEyeshadow && storedButtonEyeshadow) {
    const selectedButtonlipstick = document.querySelector(
      `.eyeshadowContainerCategories a[href="${storedButtonEyeshadow}"]`
    );
    showEyeshadowSection(storedSectionEyeshadow, selectedButtonlipstick);
  } else {
    showEyeshadowSection("eyeshadow_matte"); // Default selection if no data is stored
    // Add the border to the default Eyeshadow buttton "Eyeshadow"
    const defaultSelectedEyeshadow = document.querySelector(
      '.eyeshadowContainerCategories a[href="#eyeshadow_matte"]'
    );
    defaultSelectedEyeshadow.classList.add("selectedEyeshadow");
  }
  generateCartModelEyeshadowContent();

  //   // Event listener to open the modal when the "Add to Cart" button is clicked
  const addToCartButtonEyeshadow = document.querySelector(
    ".addToCartButtonEyeshadow"
  );
  addToCartButtonEyeshadow.addEventListener("click", () => {
    if (selectedEyeshadowArray?.length === 0) {
      const emptyCartMessage = document.getElementById(
        "emptyCartModalEyeshadow"
      );
      emptyCartMessage.style.display = "block";

      // Hide the message after a short delay
      setTimeout(() => {
        emptyCartMessage.style.display = "none";
      }, 2000);
    } else {
      openCartModalEyeshadow();
      toggleCartModalEyeshadow();
    }
  });
});

document.addEventListener("DOMContentLoaded", () => {
  const sidebarMainContainer = document.querySelector(".Sidebar_MainContainer");
  const toggleButtonEyeshadow = document.createElement("div");
  toggleButtonEyeshadow.classList.add("toggle-button");
  toggleButtonEyeshadow.innerHTML = `
    <div class="toggle-line-Eyeshadow"></div>
    <div class="toggle-line-Eyeshadow"></div>
    <div class="toggle-line-Eyeshadow"></div>
  `;

  document.body.appendChild(toggleButtonEyeshadow);

  function addToggleLinesEyeshadow() {
    const toggleLines = toggleButtonEyeshadow.querySelectorAll(
      ".toggle-line-Eyeshadow"
    );
    toggleLines.forEach((line) => {
      line.style.display = "block";
    });
  }

  function addArrowButtonEyeshadow() {
    const arrowButton = document.createElement("div");
    arrowButton.classList.add("arrow-button-Eyeshadow");
    arrowButton.innerHTML = "&#8592;";
    toggleButtonEyeshadow.appendChild(arrowButton);
  }

  function removeArrowButtonEyeshadow() {
    const arrowButton = toggleButtonEyeshadow.querySelector(
      ".arrow-button-Eyeshadow"
    );
    if (arrowButton) {
      toggleButton.removeChild(arrowButton);
    }
  }

  function removeToggleLinesEyeshadow() {
    const toggleLines = toggleButtonEyeshadow.querySelectorAll(
      ".toggle-line-Eyeshadow"
    );
    toggleLines.forEach((line) => {
      line.style.display = "none";
    });
  }
  toggleButtonEyeshadow.addEventListener("click", () => {
    sidebarMainContainer.classList.toggle("active");

    if (sidebarMainContainer.classList.contains("active")) {
      removeToggleLinesEyeshadow();
      addArrowButtonEyeshadow();
    } else {
      removeArrowButtonEyeshadow();
      addToggleLinesEyeshadow();
    }
  });
});

function closeAndToggleCartModalEyeshadow() {
  closeCartModalEyeshadow();
  toggleCartModalEyeshadow();
}

// Function to toggle the blur effect on the background elements
function toggleBlurBackgroundEyeshadow() {
  const cartModalEyeshadow = document.getElementById("cartModalEyeshadow");
  const backgroundElements = document.querySelectorAll(".blur");

  function handleBackgroundEyeshadowClick(event) {
    if (event.target === cartModalEyeshadow) {
      closeAndToggleCartModalEyeshadow();
    }
  }

  if (cartModalEyeshadow.classList.contains("active")) {
    backgroundElements.forEach((element) => {
      element.classList.add("blur-background");
      element.classList.add("unselectable");
      element.style.pointerEvents = "none";
      element.addEventListener("click", handleBackgroundEyeshadowClick);
    });
  } else {
    backgroundElements.forEach((element) => {
      element.classList.remove("blur-background");
      element.classList.remove("unselectable");
      element.style.pointerEvents = "auto";
      element.removeEventListener("click", handleBackgroundEyeshadowClick);
    });
  }
}

window.addEventListener("click", (event) => {
  const cartModalEyeshadow = document.getElementById("bbbb");
  // Check if the clicked element is outside the modal
  if (event.target == cartModalEyeshadow) {
    closeCartModalEyeshadow();
    toggleCartModalEyeshadow();
  }
});

// Function to open the cart modal
function openCartModalEyeshadow() {
  const cartModal = document.getElementById("cartModalEyeshadow");
  cartModal.style.display = "block";
  document.body.style.overflow = "hidden";
  toggleBlurBackgroundEyeshadow();
  generateCartModelEyeshadowContent();
}
function closeEmptyCartModalEyeshadow() {
  const emptyCartModal = document.getElementById("emptyCartModalEyeshadow");
  emptyCartModal.style.display = "none";
}

// Event listener to open the modal when the "Add to Cart" button is clicked
document.addEventListener("DOMContentLoaded", () => {
  const addToCartButtonEyeshadow = document.querySelector(
    ".addToCartButtonEyeshadow"
  );
  addToCartButtonEyeshadow.addEventListener("click", () => {
    if (selectedEyeshadowArray.length <= 0) {
      const emptyCartModalEyeshadow = document.getElementById(
        "emptyCartModalEyeshadow"
      );
      emptyCartModalEyeshadow.style.display = "block";

      setTimeout(() => {
        emptyCartModalEyeshadow.style.display = "none";
      }, 3000);
    } else {
      openCartModalEyeshadow();
    }
  });
});

// Function to close the cart modal
function closeCartModalEyeshadow() {
  const cartModal = document.getElementById("cartModalEyeshadow");
  cartModal.style.display = "none";
  document.body.style.overflow = "auto";
  toggleBlurBackgroundEyeshadow();
}

function toggleCartModalEyeshadow() {
  const cartModalEyeshadow = document.getElementById("cartModalEyeshadow");
  const toggleButton = document.querySelector(".toggle-button");
  cartModalEyeshadow.classList.toggle("active");
  toggleButton.style.display = cartModalEyeshadow.classList.contains("active")
    ? "none"
    : "block";

  if (cartModalEyeshadow.classList.contains("active")) {
    cartModal.style.display = "block";
  } else {
    cartModalEyeshadow.style.display = "none";
  }

  toggleBlurBackgroundEyeshadow();
}

function toggleOrderModalEyeshadow() {
  const orderModalEyeshadow = document.getElementById("orderModalEyeshadow");
  const toggleButton = document.querySelector(".toggle-button-Eyeshadow");
  orderModalEyeshadow.classList.toggle("active");
  toggleButton.style.display = orderModalEyeshadow.classList.contains("active")
    ? "none"
    : "block";

  if (orderModalEyeshadow.classList.contains("active")) {
    orderModalEyeshadow.style.display = "block";
  } else {
    orderModalEyeshadow.style.display = "none";
  }

  toggleBlurBackgroundEyeshadow();
}
function togglePaymentModalEyeshadow() {
  const paymentModalEyeshadow = document.getElementById(
    "paymentModalEyeshadow"
  );
  const toggleButton = document.querySelector(".toggle-button-Eyeshadow");
  paymentModalEyeshadow.classList.toggle("active");
  toggleButton.style.display = paymentModalEyeshadow.classList.contains(
    "active"
  )
    ? "none"
    : "block";

  if (paymentModalEyeshadow.classList.contains("active")) {
    paymentModalEyeshadow.style.display = "block";
  } else {
    paymentModalEyeshadow.style.display = "none";
  }

  toggleBlurBackgroundEyeshadow();
}

const closeButtonEyeshadow = document.getElementById("closeEyeshadow");
closeButtonEyeshadow.addEventListener("click", () => {
  closeAndToggleCartModalEyeshadow();
});

const closeArrowCartButtonEyeshadow = document.querySelector(
  ".ArrowCartEyeshadow"
);
closeArrowCartButtonEyeshadow.addEventListener("click", () => {
  closeCartModalEyeshadow();
  toggleCartModalEyeshadow();
});
const closeArrowOrderButtonEyeshadow = document.querySelector(
  ".ArrowOrderEyeshadow"
);
closeArrowOrderButtonEyeshadow.addEventListener("click", () => {
  closeOrderModalEyeshadow();
  removeToggleLinesEyeshadow();
  toggleOrderModalEyeshadow();
});
const closeArrowPaymentButtonEyeshadow = document.querySelector(
  ".ArrowPaymentEyeshadow"
);
closeArrowPaymentButtonEyeshadow.addEventListener("click", () => {
  closePaymentModalEyeshadow();
  removeToggleLinesEyeshadow();
  togglePaymentModalEyeshadow();
});

// Function to place the order
function openOrderModalEyeshadow() {
  // closeCartModal();
  const orderModalEyeshadow = document.getElementById("orderModalEyeshadow");
  orderModalEyeshadow.style.display = "block";
}

function closeOrderModalEyeshadow() {
  const orderModalEyeshadow = document.getElementById("orderModalEyeshadow");
  orderModalEyeshadow.style.display = "none";
}

function submitOrderEyeshadow() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalEyeshadow();
}

function openPaymentModalEyeshadow() {
  // closeCartModal();
  const orderModalEyeshadow = document.getElementById("paymentModalEyeshadow");
  orderModalEyeshadow.style.display = "block";
}

function closePaymentModalEyeshadow() {
  const orderModal = document.getElementById("paymentModalEyeshadow");
  orderModal.style.display = "none";
}
function openPaynowModalEyeshadow() {
  const orderModalEyeshadow = document.getElementById("payNowEyeshadow");
  orderModalEyeshadow.style.display = "block";
}

function closePaynowModalEyeshadow() {
  const orderModalEyeshadow = document.getElementById("payNowEyeshadow");
  orderModalEyeshadow.style.display = "none";
}

function submitPaymentEyeshadow() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalEyeshadow();
}

function submitPaynowbtnEyeshadow() {
  const modalsEyeshadow = document.getElementsByClassName("modal");
  for (const modalEyeshadow of modalsEyeshadow) {
    modalEyeshadow.style.display = "none";
  }

  // Remove the blur effect on the background elements
  const backgroundElementsEyeshadow = document.querySelectorAll(".blur");
  backgroundElementsEyeshadow.forEach((element) => {
    element.classList.remove("blur-background");
    element.classList.remove("unselectable");
    element.style.pointerEvents = "auto";
  });

  // Clear the selected Eyeshadow array and remove the Eyeshadow from the addToCart section
  selectedEyeshadowArray = [];
  const addToCartSectionEyeshadow = document.querySelector(
    ".addToCartEyeshadow"
  );
  addToCartSectionEyeshadow.innerHTML = "";
  localStorage.removeItem("selectedEyeshadowArray"); // Clear local storage

  toggleCartModalEyeshadow();
}

// ..................Foundation js Here.............//

let selectedFoundationArray = [];
function showFoundationSection(sectionId, button) {
  // Hide all sections
  const sectionsFoundation = document.querySelectorAll(".foundationContent");
  sectionsFoundation.forEach((section) => {
    section.style.display = "none";
  });

  // Remove the "selected Foundation Container Categories" class from all buttons
  const buttonsFoundation = document.querySelectorAll(
    ".foundationContainerCategories a"
  );
  buttonsFoundation.forEach((btn) => {
    btn.classList.remove("selectedFoundation");
  });

  // Show the selected section
  const selectedSectionFoundation = document.getElementById(sectionId);
  if (selectedSectionFoundation) {
    selectedSectionFoundation.style.display = "flex";
    localStorage.setItem("selectedSectionFoundation", sectionId);
  }

  // Add the "selected  Foundation Categories" class to the clicked button
  if (button) {
    button.classList.add("selectedFoundation");
    localStorage.setItem(
      "selectedButtonfoundation",
      button.getAttribute("href")
    );
  }
  window.history.pushState(null, `#foundation${sectionId}`);
}

// Store the selectd  Foundation section and selected Foundation hover button in local storage
const storedSectionfoundation = localStorage.getItem(
  "selectedSectionFoundation"
);
const storedButtonfoundation = localStorage.getItem("selectedButtonfoundation");

if (storedSectionfoundation) {
  showFoundationSection(storedSectionfoundation);
}

// Restore the selected foundation Container Categories and selected buttons border after the page is refreshed
if (storedButtonfoundation) {
  const buttonsFoundation = document.querySelectorAll(
    ".foundationContainerCategories a"
  );
  buttonsFoundation.forEach((btn) => {
    if (btn.getAttribute("href") === storedButtonfoundation) {
      btn.classList.add("selectedFoundation");
    }
  });
}

// Helper function to display the selected foundation in the addToCart section
function displaySelectedFoundation(img, icon, title, price, index) {
  const addToCartSectionFoundation = document.querySelector(
    ".addToCartFoundation"
  );

  // Create a new div to hold each selected foundation
  const selectedFoundationDiv = document.createElement("div");
  selectedFoundationDiv.classList.add("selectedFoundationInfo");

  // Populate the div with the selected foundation data
  selectedFoundationDiv.innerHTML = `
    <div class="lipstickInfo">
      <img class="addToCartImg" src="${img}"/>
      <img class="addToCartIcon" src="${icon}" />
      <div class="Foundation_Details">
        <h4>${title}</h4>
        <p>${price}</p>
      </div>
      <div class="deleteButtonfoundation" data-index="${index}">
        <img class="delete_icon" src="/Images/Icons/detele_Icon.png" />
      </div>
    </div>
  `;

  const deleteButtonfoundation = selectedFoundationDiv.querySelector(
    ".deleteButtonfoundation"
  );
  deleteButtonfoundation.addEventListener("click", () => {
    // Get the index of the selected foundation from the data-index attribute
    const indexToRemoveFoundation = parseInt(
      deleteButtonfoundation.getAttribute("data-index"),
      10
    );

    // Remove the selected foundation from the array and update the display
    removeSelectedFoundation(selectedFoundationDiv, indexToRemoveFoundation);
  });

  // Append the div to the addToCartSection
  addToCartSectionFoundation.appendChild(selectedFoundationDiv);
}

function removeSelectedFoundation(
  selectedFoundationDiv,
  indexToRemoveFoundation
) {
  const addToCartSectionFoundation = document.querySelector(
    ".addToCartFoundation"
  );

  // Remove the selected foundation div from the addToCartSection
  addToCartSectionFoundation.removeChild(selectedFoundationDiv);

  // Remove the selected Foundation from the array
  selectedFoundationArray.splice(indexToRemoveFoundation, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedFoundationArray",
    JSON.stringify(selectedFoundationArray)
  );
  generateCartModelFoundationContent();
}

function removeSelectedCartFoundation(
  cartItemFoundationDiv,
  indexToRemoveFoundation
) {
  const cartItemsContainerFoundation = document.querySelector(
    ".cart-items-Foundation"
  );
  const addToCartSectionFoundation = document.querySelector(
    ".addToCartFoundation"
  );

  // Remove the selected foundation div from the cart-items section
  cartItemsContainerFoundation.removeChild(cartItemFoundationDiv);

  // Remove the selected foundation div from the addToCart section
  const addToCartItemsFoundation = addToCartSectionFoundation.querySelectorAll(
    ".selectedFoundationInfo"
  );
  if (addToCartItemsFoundation?.length > indexToRemoveFoundation) {
    addToCartSectionFoundation.removeChild(
      addToCartItemsFoundation[indexToRemoveFoundation]
    );
  }

  // Remove the selected foundation from the array
  selectedFoundationArray.splice(indexToRemoveFoundation, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedFoundationArray",
    JSON.stringify(selectedFoundationArray)
  );

  // Regenerate the cart items and update the total price in the modal
  generateCartModelFoundationContent();
}

function handleFoundationImageClick(img, icon, title, price) {
  // Clear local storage and the UI if a foundation is already selected
  if (selectedFoundationArray?.length > 0) {
    selectedFoundationArray = [];
    const addToCartSectionFoundation = document.querySelector(
      ".addToCartFoundation"
    );
    addToCartSectionFoundation.innerHTML = "";
    localStorage.removeItem("selectedFoundationArray"); // Clear local storage
  }

  // Call the function to display the selected Foundation in the addToCart section
  displaySelectedFoundation(
    img,
    icon,
    title,
    price,
    selectedFoundationArray.length
  );

  // Add the selected Foundation data to the array
  const selectedItemData = {
    img: img,
    icon: icon,
    title: title,
    price: price,
  };
  selectedFoundationArray.push(selectedItemData);

  // Store the updated Add to Cart array in localStorage
  localStorage.setItem(
    "selectedFoundationArray",
    JSON.stringify(selectedFoundationArray)
  );
}

function displaySelectedFoundationOnLoad() {
  // Retrieve the selected foundation Add to Cart from localStorage
  const storedFoundation = localStorage.getItem("selectedFoundationArray");
  if (storedFoundation) {
    selectedFoundationArray = JSON.parse(storedFoundation);

    // Display each selected foundation in the addToCart section
    selectedFoundationArray.forEach((foundationData, index) => {
      displaySelectedFoundation(
        foundationData.img,
        foundationData.icon,
        foundationData.title,
        foundationData.price,
        index
      );
    });
  }
}

displaySelectedFoundationOnLoad();

function generateLiquidFoundationContent() {
  const liquidFoundationContainer =
    document.getElementById("foundation_liquid");

  const liquidFoundationHTML = FoundationLiquid.map(
    (item) => `
    <div class="lipstickItem"
    onclick="handleFoundationImageClick( '${item.img}',
    '${item.icon}', '${item.title}', '${item.price}')" >
      <img class="img" src=${item.img}  />
      <img class="icon" src="${item.icon}"/>
      <h3>${item.title}</h3>
      <p >${item.content}</p>
    </div>
  `
  ).join("");

  liquidFoundationContainer.innerHTML = liquidFoundationHTML;
}

generateLiquidFoundationContent();

function generateCartModelFoundationContent() {
  const cartItemsContainerFoundation = document.querySelector(
    ".cart-items-Foundation"
  );
  cartItemsContainerFoundation.innerHTML = ""; // Clear previous content

  // Iterate through the selected Foundation array and create HTML elements for each selected Foundation
  selectedFoundationArray.forEach((ItemData, index) => {
    const cartItemDivFoundation = document.createElement("div");
    cartItemDivFoundation.classList.add("cart-item-Foundation");
    cartItemDivFoundation.innerHTML = `
      <div class="cart-item-info">
        <img class="cart-item-img" src="${ItemData.img}"  />
        <img class="cart-item-icon" src="${ItemData.icon}" />
        <h4>${ItemData.title}</h4>
        <p>${ItemData.price}</p>
      </div>
      <div class="deleteButtonCartFoundation" data-index="${index}"><img class="delete_icon" src="/Images/Icons/detele_Icon.png" /></div>
    </div>
  `;

    const deleteCartButtonFoundation = cartItemDivFoundation.querySelector(
      ".deleteButtonCartFoundation"
    );
    deleteCartButtonFoundation.addEventListener("click", () => {
      // Get the index of the selected foundation from the data-index attribute
      const indexToRemoveFoundation = parseInt(
        deleteCartButtonFoundation.getAttribute("data-index"),
        10
      );
      // Call the function to remove the selected foundaton from the array and update the display
      removeSelectedCartFoundation(
        cartItemDivFoundation,
        indexToRemoveFoundation
      );
    });

    cartItemsContainerFoundation.appendChild(cartItemDivFoundation);
  });

  // Calculate and display the total price
  const totalPriceElementFoundation = document.getElementById(
    "totalPricefoundation"
  );
  let totalPriceFoundation = 0;
  selectedFoundationArray.forEach((Foundation) => {
    totalPriceFoundation += parseInt(Foundation.price.slice(1));
  });
  totalPriceElementFoundation.textContent = `$${totalPriceFoundation}`;
}

// Call the function when the DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  // For Foundation Container Categories
  const storedSectionFoundation = localStorage.getItem(
    "selectedSectionFoundation"
  );
  const storedButtonFoundation = localStorage.getItem(
    "selectedButtonFoundation"
  );
  if (storedSectionFoundation && storedButtonFoundation) {
    const selectedButtonfoundation = document.querySelector(
      `.foundationContainerCategories a[href="${storedButtonFoundation}"]`
    );
    showFoundationSection(storedSectionFoundation, selectedButtonfoundation);
  } else {
    showFoundationSection("foundation_liquid"); // Default selection if no data is stored
    // Add the border to the default selectedfoundation buttton "Foundation"
    const defaultSelectedFoundation = document.querySelector(
      '.foundationContainerCategories a[href="#foundation_liquid"]'
    );
    defaultSelectedFoundation.classList.add("selectedFoundation");
  }
  generateCartModelFoundationContent();

  //   // Event listener to open the modal when the "Add to Cart" button is clicked
  const addToCartButtonFoundation = document.querySelector(
    ".addToCartButtonFoundation"
  );
  addToCartButtonFoundation.addEventListener("click", () => {
    if (selectedFoundationArray?.length === 0) {
      const emptyCartMessage = document.getElementById(
        "emptyCartModalFoundation"
      );
      emptyCartMessage.style.display = "block";

      // Hide the message after a short delay
      setTimeout(() => {
        emptyCartMessage.style.display = "none";
      }, 2000);
    } else {
      openCartModalFoundation();
      toggleCartModalFoundation();
    }
  });
});

document.addEventListener("DOMContentLoaded", () => {
  const sidebarMainContainer = document.querySelector(".Sidebar_MainContainer");
  const toggleButtonFoundation = document.createElement("div");
  toggleButtonFoundation.classList.add("toggle-button");
  toggleButtonFoundation.innerHTML = `
    <div class="toggle-line-Foundation"></div>
    <div class="toggle-line-Foundation"></div>
    <div class="toggle-line-Foundation"></div>
  `;

  document.body.appendChild(toggleButtonFoundation);

  function addToggleLinesFoundation() {
    const toggleLines = toggleButtonFoundation.querySelectorAll(
      ".toggle-line-Foundation"
    );
    toggleLines.forEach((line) => {
      line.style.display = "block";
    });
  }

  function addArrowButtonFoundation() {
    const arrowButton = document.createElement("div");
    arrowButton.classList.add("arrow-button-Foundation");
    arrowButton.innerHTML = "&#8592;";
    toggleButtonFoundation.appendChild(arrowButton);
  }

  function removeArrowButtonFoundation() {
    const arrowButton = toggleButtonFoundation.querySelector(
      ".arrow-button-Foundation"
    );
    if (arrowButton) {
      toggleButton.removeChild(arrowButton);
    }
  }

  function removeToggleLinesFoundation() {
    const toggleLines = toggleButtonFoundation.querySelectorAll(
      ".toggle-line-Foundation"
    );
    toggleLines.forEach((line) => {
      line.style.display = "none";
    });
  }
  toggleButtonFoundation.addEventListener("click", () => {
    sidebarMainContainer.classList.toggle("active");

    if (sidebarMainContainer.classList.contains("active")) {
      removeToggleLinesFoundation();
      addArrowButtonFoundation();
    } else {
      removeArrowButtonFoundation();
      addToggleLinesFoundation();
    }
  });
});

function closeAndToggleCartModalFoundation() {
  closeCartModalFoundation();
  toggleCartModalFoundation();
}

// Function to toggle the blur effect on the background elements
function toggleBlurBackgroundFoundation() {
  const cartModalFoundation = document.getElementById("cartModalFoundation");
  const backgroundElements = document.querySelectorAll(".blur");

  function handleBackgroundFoundationClick(event) {
    if (event.target === cartModalFoundation) {
      closeAndToggleCartModalFoundation();
    }
  }

  if (cartModalFoundation.classList.contains("active")) {
    backgroundElements.forEach((element) => {
      element.classList.add("blur-background");
      element.classList.add("unselectable");
      element.style.pointerEvents = "none";
      element.addEventListener("click", handleBackgroundFoundationClick);
    });
  } else {
    backgroundElements.forEach((element) => {
      element.classList.remove("blur-background");
      element.classList.remove("unselectable");
      element.style.pointerEvents = "auto";
      element.removeEventListener("click", handleBackgroundFoundationClick);
    });
  }
}

window.addEventListener("click", (event) => {
  const cartModalFoundation = document.getElementById("bbbb");
  // Check if the clicked element is outside the modal
  if (event.target == cartModalFoundation) {
    closeCartModalFoundation();
    toggleCartModalFoundation();
  }
});

// Function to open the cart modal
function openCartModalFoundation() {
  const cartModal = document.getElementById("cartModalFoundation");
  cartModal.style.display = "block";
  document.body.style.overflow = "hidden";
  toggleBlurBackgroundFoundation();
  generateCartModelFoundationContent();
}
function closeEmptyCartModalFoundation() {
  const emptyCartModal = document.getElementById("emptyCartModalFoundation");
  emptyCartModal.style.display = "none";
}

// Event listener to open the modal when the "Add to Cart" button is clicked
document.addEventListener("DOMContentLoaded", () => {
  const addToCartButtonFoundation = document.querySelector(
    ".addToCartButtonFoundation"
  );
  addToCartButtonFoundation.addEventListener("click", () => {
    if (selectedFoundationArray.length <= 0) {
      const emptyCartModalFoundation = document.getElementById(
        "emptyCartModalFoundation"
      );
      emptyCartModalFoundation.style.display = "block";

      setTimeout(() => {
        emptyCartModalFoundation.style.display = "none";
      }, 3000);
    } else {
      openCartModalFoundation();
    }
  });
});

// Function to close the cart modal
function closeCartModalFoundation() {
  const cartModal = document.getElementById("cartModalFoundation");
  cartModal.style.display = "none";
  document.body.style.overflow = "auto";
  toggleBlurBackgroundFoundation();
}

function toggleCartModalFoundation() {
  const cartModalFoundation = document.getElementById("cartModalFoundation");
  const toggleButton = document.querySelector(".toggle-button");
  cartModalFoundation.classList.toggle("active");
  toggleButton.style.display = cartModalFoundation.classList.contains("active")
    ? "none"
    : "block";

  if (cartModalFoundation.classList.contains("active")) {
    cartModal.style.display = "block";
  } else {
    cartModalFoundation.style.display = "none";
  }

  toggleBlurBackgroundFoundation();
}

function toggleOrderModalFoundation() {
  const orderModalFoundation = document.getElementById("orderModalFoundation");
  const toggleButton = document.querySelector(".toggle-button-Foundation");
  orderModalFoundation.classList.toggle("active");
  toggleButton.style.display = orderModalFoundation.classList.contains("active")
    ? "none"
    : "block";

  if (orderModalFoundation.classList.contains("active")) {
    orderModalFoundation.style.display = "block";
  } else {
    orderModalFoundation.style.display = "none";
  }

  toggleBlurBackgroundFoundation();
}
function togglePaymentModalFoundation() {
  const paymentModalFoundation = document.getElementById(
    "paymentModalFoundation"
  );
  const toggleButton = document.querySelector(".toggle-button-Foundation");
  paymentModalFoundation.classList.toggle("active");
  toggleButton.style.display = paymentModalFoundation.classList.contains(
    "active"
  )
    ? "none"
    : "block";

  if (paymentModalFoundation.classList.contains("active")) {
    paymentModalFoundation.style.display = "block";
  } else {
    paymentModalFoundation.style.display = "none";
  }

  toggleBlurBackgroundFoundation();
}

const closeButtonFoundation = document.getElementById("closeFoundation");
closeButtonFoundation.addEventListener("click", () => {
  closeAndToggleCartModalFoundation();
});

const closeArrowCartButtonFoundation = document.querySelector(
  ".ArrowCartFoundation"
);
closeArrowCartButtonFoundation.addEventListener("click", () => {
  closeCartModalFoundation();
  toggleCartModalFoundation();
});
const closeArrowOrderButtonFoundation = document.querySelector(
  ".ArrowOrderFoundation"
);
closeArrowOrderButtonFoundation.addEventListener("click", () => {
  closeOrderModalFoundation();
  removeToggleLinesFoundation();
  toggleOrderModalFoundation();
});
const closeArrowPaymentButtonFoundation = document.querySelector(
  ".ArrowPaymentFoundation"
);
closeArrowPaymentButtonFoundation.addEventListener("click", () => {
  closePaymentModalFoundation();
  removeToggleLinesFoundation();
  togglePaymentModalFoundation();
});

// Function to place the order
function openOrderModalFoundation() {
  const orderModalFoundation = document.getElementById("orderModalFoundation");
  orderModalFoundation.style.display = "block";
}

function closeOrderModalFoundation() {
  const orderModalFoundation = document.getElementById("orderModalFoundation");
  orderModalFoundation.style.display = "none";
}

function submitOrderFoundation() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalFoundation();
}

function openPaymentModalFoundation() {
  const orderModalFoundation = document.getElementById(
    "paymentModalFoundation"
  );
  orderModalFoundation.style.display = "block";
}

function closePaymentModalFoundation() {
  const orderModal = document.getElementById("paymentModalFoundation");
  orderModal.style.display = "none";
}
function openPaynowModalFoundation() {
  const orderModalFoundation = document.getElementById("payNowFoundation");
  orderModalFoundation.style.display = "block";
}

function closePaynowModalFoundation() {
  const orderModalFoundation = document.getElementById("payNowFoundation");
  orderModalFoundation.style.display = "none";
}

function submitPaymentFoundation() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalFoundation();
}

function submitPaynowbtnFoundation() {
  const modalsFoundation = document.getElementsByClassName("modal");
  for (const modalFoundation of modalsFoundation) {
    modalFoundation.style.display = "none";
  }

  // Remove the blur effect on the background elements
  const backgroundElementsFoundation = document.querySelectorAll(".blur");
  backgroundElementsFoundation.forEach((element) => {
    element.classList.remove("blur-background");
    element.classList.remove("unselectable");
    element.style.pointerEvents = "auto";
  });

  // Clear the selected foundation array and remove the foundation from the addToCart section
  selectedFoundationArray = [];
  const addToCartSectionFoundation = document.querySelector(
    ".addToCartFoundation"
  );
  addToCartSectionFoundation.innerHTML = "";
  localStorage.removeItem("selectedFoundationArray"); // Clear local storage

  toggleCartModalFoundation();
}

// .......................Blush Js Here........................//

let selectedBlushArray = [];
function showBlushSection(sectionId, button) {
  // Hide all sections
  const sectionsBlush = document.querySelectorAll(".blushContent");
  sectionsBlush.forEach((section) => {
    section.style.display = "none";
  });

  // Remove the "selected Blush Container Categories" class from all buttons
  const buttonsBlush = document.querySelectorAll(".blushContainerCategories a");
  buttonsBlush.forEach((btn) => {
    btn.classList.remove("selectedBlush");
  });

  // Show the selected section
  const selectedSectionBlush = document.getElementById(sectionId);
  if (selectedSectionBlush) {
    selectedSectionBlush.style.display = "flex";
    localStorage.setItem("selectedSectionBlush", sectionId);
  }

  // Add the "selected  Blush Categories" class to the clicked button
  if (button) {
    button.classList.add("selectedBlush");
    localStorage.setItem("selectedButtonblush", button.getAttribute("href"));
  }
  window.history.pushState(null, `#blush${sectionId}`);
}

// Store the selectd  Blush section and selected Blush hover button in local storage
const storedSectionblush = localStorage.getItem("selectedSectionBlush");
const storedButtonblush = localStorage.getItem("selectedButtonblush");

if (storedSectionblush) {
  showBlushSection(storedSectionblush);
}

// Restore the selected blush Container Categories and selected buttons border after the page is refreshed
if (storedButtonblush) {
  const buttonsBlush = document.querySelectorAll(".blushContainerCategories a");
  buttonsBlush.forEach((btn) => {
    if (btn.getAttribute("href") === storedButtonblush) {
      btn.classList.add("selectedBlush");
    }
  });
}

// Helper function to display the selected Blush in the addToCart section
function displaySelectedBlush(img, icon, title, price, index) {
  const addToCartSectionBlush = document.querySelector(".addToCartBlush");

  // Create a new div to hold each selected Blush
  const selectedBlushDiv = document.createElement("div");
  selectedBlushDiv.classList.add("selectedBlushInfo");

  // Populate the div with the selected Blush data
  selectedBlushDiv.innerHTML = `
    <div class="lipstickInfo">
      <img class="addToCartImg" src="${img}"/>
      <img class="addToCartIcon" src="${icon}" />
      <div class="Blush_Details">
        <h4>${title}</h4>
        <p>${price}</p>
      </div>
      <div class="deleteButtonblush" data-index="${index}">
        <img class="delete_icon" src="/Images/Icons/detele_Icon.png" />
      </div>
    </div>
  `;

  const deleteButtonblush =
    selectedBlushDiv.querySelector(".deleteButtonblush");
  deleteButtonblush.addEventListener("click", () => {
    // Get the index of the selected Blush from the data-index attribute
    const indexToRemoveBlush = parseInt(
      deleteButtonblush.getAttribute("data-index"),
      10
    );

    // Remove the selected Blush from the array and update the display
    removeSelectedBlush(selectedBlushDiv, indexToRemoveBlush);
  });

  // Append the div to the addToCartSection
  addToCartSectionBlush.appendChild(selectedBlushDiv);
}

function removeSelectedBlush(selectedBlushDiv, indexToRemoveBlush) {
  const addToCartSectionBlush = document.querySelector(".addToCartBlush");

  // Remove the selected Blush div from the addToCartSection
  addToCartSectionBlush.removeChild(selectedBlushDiv);

  // Remove the selected Blush from the array
  selectedBlushArray.splice(indexToRemoveBlush, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedBlushArray",
    JSON.stringify(selectedBlushArray)
  );
  generateCartModelBlushContent();
}

function removeSelectedCartBlush(cartItemBlushDiv, indexToRemoveBlush) {
  const cartItemsContainerBlush = document.querySelector(".cart-items-Blush");
  const addToCartSectionBlush = document.querySelector(".addToCartBlush");

  // Remove the selected Blush div from the cart-items section
  cartItemsContainerBlush.removeChild(cartItemBlushDiv);

  // Remove the selected Blush div from the addToCart section
  const addToCartItemsBlush =
    addToCartSectionBlush.querySelectorAll(".selectedBlushInfo");
  if (addToCartItemsBlush?.length > indexToRemoveBlush) {
    addToCartSectionBlush.removeChild(addToCartItemsBlush[indexToRemoveBlush]);
  }

  // Remove the selected Blush from the array
  selectedBlushArray.splice(indexToRemoveBlush, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedBlushArray",
    JSON.stringify(selectedBlushArray)
  );

  // Regenerate the cart items and update the total price in the modal
  generateCartModelBlushContent();
}

function handleBlushImageClick(img, icon, title, price) {
  // Clear local storage and the UI if a Blush is already selected
  if (selectedBlushArray?.length > 0) {
    selectedBlushArray = [];
    const addToCartSectionBlush = document.querySelector(".addToCartBlush");
    addToCartSectionBlush.innerHTML = "";
    localStorage.removeItem("selectedBlushArray"); // Clear local storage
  }

  // Call the function to display the selected Blush in the addToCart section
  displaySelectedBlush(img, icon, title, price, selectedBlushArray.length);

  // Add the selected Blush data to the array
  const selectedItemData = {
    img: img,
    icon: icon,
    title: title,
    price: price,
  };
  selectedBlushArray.push(selectedItemData);

  // Store the updated Add to Cart array in localStorage
  localStorage.setItem(
    "selectedBlushArray",
    JSON.stringify(selectedBlushArray)
  );
}

function displaySelectedBlushOnLoad() {
  // Retrieve the selected Blush Add to Cart from localStorage
  const storedBlush = localStorage.getItem("selectedBlushArray");
  if (storedBlush) {
    selectedBlushArray = JSON.parse(storedBlush);

    // Display each selected Blush in the addToCart section
    selectedBlushArray.forEach((BlushData, index) => {
      displaySelectedBlush(
        BlushData.img,
        BlushData.icon,
        BlushData.title,
        BlushData.price,
        index
      );
    });
  }
}

displaySelectedBlushOnLoad();

function generateLiquidBlushContent() {
  const liquidBlushContainer = document.getElementById("blush_pressed");

  const liquidBlushHTML = BlushLiquid.map(
    (item) => `
    <div class="lipstickItem"
    onclick="handleBlushImageClick( '${item.img}',
    '${item.icon}', '${item.title}', '${item.price}')" >
      <img class="img" src=${item.img} " /> 
      <img class="icon" src="${item.icon}"/>
      <h3>${item.title}</h3>
      <p >${item.content}</p>
    </div>
  `
  ).join("");

  liquidBlushContainer.innerHTML = liquidBlushHTML;
}

generateLiquidBlushContent();

function generateCartModelBlushContent() {
  const cartItemsContainerBlush = document.querySelector(".cart-items-Blush");
  cartItemsContainerBlush.innerHTML = ""; // Clear previous content

  // Iterate through the selected Blush array and create HTML elements for each selected Blush
  selectedBlushArray.forEach((ItemData, index) => {
    const cartItemDivBlush = document.createElement("div");
    cartItemDivBlush.classList.add("cart-item-Blush");
    cartItemDivBlush.innerHTML = `
      <div class="cart-item-info">
        <img class="cart-item-img" src="${ItemData.img}"  />
        <img class="cart-item-icon" src="${ItemData.icon}" />
        <h4>${ItemData.title}</h4>
        <p>${ItemData.price}</p>
      </div>
      <div class="deleteButtonCartBlush" data-index="${index}"><img class="delete_icon" src="/Images/Icons/detele_Icon.png" /></div>
    </div>
  `;

    const deleteCartButtonBlush = cartItemDivBlush.querySelector(
      ".deleteButtonCartBlush"
    );
    deleteCartButtonBlush.addEventListener("click", () => {
      // Get the index of the selected Blush from the data-index attribute
      const indexToRemoveBlush = parseInt(
        deleteCartButtonBlush.getAttribute("data-index"),
        10
      );
      // Call the function to remove the selected foundaton from the array and update the display
      removeSelectedCartBlush(cartItemDivBlush, indexToRemoveBlush);
    });

    cartItemsContainerBlush.appendChild(cartItemDivBlush);
  });

  // Calculate and display the total price
  const totalPriceElementBlush = document.getElementById("totalPriceblush");
  let totalPriceBlush = 0;
  selectedBlushArray.forEach((Blush) => {
    totalPriceBlush += parseInt(Blush.price.slice(1));
  });
  totalPriceElementBlush.textContent = `$${totalPriceBlush}`;
}

// Call the function when the DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  // For Blush Container Categories
  const storedSectionBlush = localStorage.getItem("selectedSectionBlush");
  const storedButtonBlush = localStorage.getItem("selectedButtonBlush");
  if (storedSectionBlush && storedButtonBlush) {
    const selectedButtonblush = document.querySelector(
      `.blushContainerCategories a[href="${storedButtonBlush}"]`
    );
    showBlushSection(storedSectionBlush, selectedButtonblush);
  } else {
    showBlushSection("blush_pressed"); // Default selection if no data is stored
    // Add the border to the default selectedBlush buttton "Blush"
    const defaultSelectedBlush = document.querySelector(
      '.blushContainerCategories a[href="#blush_pressed"]'
    );
    defaultSelectedBlush.classList.add("selectedBlush");
  }
  generateCartModelBlushContent();

  //   // Event listener to open the modal when the "Add to Cart" button is clicked
  const addToCartButtonBlush = document.querySelector(".addToCartButtonBlush");
  addToCartButtonBlush.addEventListener("click", () => {
    if (selectedBlushArray?.length === 0) {
      const emptyCartMessage = document.getElementById("emptyCartModalBlush");
      emptyCartMessage.style.display = "block";

      // Hide the message after a short delay
      setTimeout(() => {
        emptyCartMessage.style.display = "none";
      }, 2000);
    } else {
      openCartModalBlush();
      toggleCartModalBlush();
    }
  });
});

document.addEventListener("DOMContentLoaded", () => {
  const sidebarMainContainer = document.querySelector(".Sidebar_MainContainer");
  const toggleButtonBlush = document.createElement("div");
  toggleButtonBlush.classList.add("toggle-button");
  toggleButtonBlush.innerHTML = `
    <div class="toggle-line-Blush"></div>
    <div class="toggle-line-Blush"></div>
    <div class="toggle-line-Blush"></div>
  `;

  document.body.appendChild(toggleButtonBlush);

  function addToggleLinesBlush() {
    const toggleLines =
      toggleButtonBlush.querySelectorAll(".toggle-line-Blush");
    toggleLines.forEach((line) => {
      line.style.display = "block";
    });
  }

  function addArrowButtonBlush() {
    const arrowButton = document.createElement("div");
    arrowButton.classList.add("arrow-button-Blush");
    arrowButton.innerHTML = "&#8592;";
    toggleButtonBlush.appendChild(arrowButton);
  }

  function removeArrowButtonBlush() {
    const arrowButton = toggleButtonBlush.querySelector(".arrow-button-Blush");
    if (arrowButton) {
      toggleButton.removeChild(arrowButton);
    }
  }

  function removeToggleLinesBlush() {
    const toggleLines =
      toggleButtonBlush.querySelectorAll(".toggle-line-Blush");
    toggleLines.forEach((line) => {
      line.style.display = "none";
    });
  }
  toggleButtonBlush.addEventListener("click", () => {
    sidebarMainContainer.classList.toggle("active");

    if (sidebarMainContainer.classList.contains("active")) {
      removeToggleLinesBlush();
      addArrowButtonBlush();
    } else {
      removeArrowButtonBlush();
      addToggleLinesBlush();
    }
  });
});

function closeAndToggleCartModalBlush() {
  closeCartModalBlush();
  toggleCartModalBlush();
}

// Function to toggle the blur effect on the background elements
function toggleBlurBackgroundBlush() {
  const cartModalBlush = document.getElementById("cartModalBlush");
  const backgroundElements = document.querySelectorAll(".blur");

  function handleBackgroundBlushClick(event) {
    if (event.target === cartModalBlush) {
      closeAndToggleCartModalBlush();
    }
  }

  if (cartModalBlush.classList.contains("active")) {
    backgroundElements.forEach((element) => {
      element.classList.add("blur-background");
      element.classList.add("unselectable");
      element.style.pointerEvents = "none";
      element.addEventListener("click", handleBackgroundBlushClick);
    });
  } else {
    backgroundElements.forEach((element) => {
      element.classList.remove("blur-background");
      element.classList.remove("unselectable");
      element.style.pointerEvents = "auto";
      element.removeEventListener("click", handleBackgroundBlushClick);
    });
  }
}

window.addEventListener("click", (event) => {
  const cartModalBlush = document.getElementById("bbbb");
  // Check if the clicked element is outside the modal
  if (event.target == cartModalBlush) {
    closeCartModalBlush();
    toggleCartModalBlush();
  }
});

// Function to open the cart modal
function openCartModalBlush() {
  const cartModal = document.getElementById("cartModalBlush");
  cartModal.style.display = "block";
  document.body.style.overflow = "hidden";
  toggleBlurBackgroundBlush();
  generateCartModelBlushContent();
}
function closeEmptyCartModalBlush() {
  const emptyCartModal = document.getElementById("emptyCartModalBlush");
  emptyCartModal.style.display = "none";
}

// Event listener to open the modal when the "Add to Cart" button is clicked
document.addEventListener("DOMContentLoaded", () => {
  const addToCartButtonBlush = document.querySelector(".addToCartButtonBlush");
  addToCartButtonBlush.addEventListener("click", () => {
    if (selectedBlushArray.length <= 0) {
      const emptyCartModalBlush = document.getElementById(
        "emptyCartModalBlush"
      );
      emptyCartModalBlush.style.display = "block";

      setTimeout(() => {
        emptyCartModalBlush.style.display = "none";
      }, 3000);
    } else {
      openCartModalBlush();
    }
  });
});

// Function to close the cart modal
function closeCartModalBlush() {
  const cartModal = document.getElementById("cartModalBlush");
  cartModal.style.display = "none";
  document.body.style.overflow = "auto";
  toggleBlurBackgroundBlush();
}

function toggleCartModalBlush() {
  const cartModalBlush = document.getElementById("cartModalBlush");
  const toggleButton = document.querySelector(".toggle-button");
  cartModalBlush.classList.toggle("active");
  toggleButton.style.display = cartModalBlush.classList.contains("active")
    ? "none"
    : "block";

  if (cartModalBlush.classList.contains("active")) {
    cartModalBlush.style.display = "block";
  } else {
    cartModalBlush.style.display = "none";
  }

  toggleBlurBackgroundBlush();
}

function toggleOrderModalBlush() {
  const orderModalBlush = document.getElementById("orderModalBlush");
  const toggleButton = document.querySelector(".toggle-button-Blush");
  orderModalBlush.classList.toggle("active");
  toggleButton.style.display = orderModalBlush.classList.contains("active")
    ? "none"
    : "block";

  if (orderModalBlush.classList.contains("active")) {
    orderModalBlush.style.display = "block";
  } else {
    orderModalBlush.style.display = "none";
  }

  toggleBlurBackgroundBlush();
}
function togglePaymentModalBlush() {
  const paymentModalBlush = document.getElementById("paymentModalBlush");
  const toggleButton = document.querySelector(".toggle-button-Blush");
  paymentModalBlush.classList.toggle("active");
  toggleButton.style.display = paymentModalBlush.classList.contains("active")
    ? "none"
    : "block";

  if (paymentModalBlush.classList.contains("active")) {
    paymentModalBlush.style.display = "block";
  } else {
    paymentModalBlush.style.display = "none";
  }

  toggleBlurBackgroundBlush();
}

const closeButtonBlush = document.getElementById("closeBlush");
closeButtonBlush.addEventListener("click", () => {
  closeAndToggleCartModalBlush();
});

const closeArrowCartButtonBlush = document.querySelector(".ArrowCartBlush");
closeArrowCartButtonBlush.addEventListener("click", () => {
  closeCartModalBlush();
  toggleCartModalBlush();
});
const closeArrowOrderButtonBlush = document.querySelector(".ArrowOrderBlush");
closeArrowOrderButtonBlush.addEventListener("click", () => {
  closeOrderModalBlush();
  removeToggleLinesBlush();
  toggleOrderModalBlush();
});
const closeArrowPaymentButtonBlush =
  document.querySelector(".ArrowPaymentBlush");
closeArrowPaymentButtonBlush.addEventListener("click", () => {
  closePaymentModalBlush();
  removeToggleLinesBlush();
  togglePaymentModalBlush();
});

// Function to place the order
function openOrderModalBlush() {
  const orderModalBlush = document.getElementById("orderModalBlush");
  orderModalBlush.style.display = "block";
}

function closeOrderModalBlush() {
  const orderModalBlush = document.getElementById("orderModalBlush");
  orderModalBlush.style.display = "none";
}

function submitOrderBlush() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalBlush();
}

function openPaymentModalBlush() {
  const orderModalBlush = document.getElementById("paymentModalBlush");
  orderModalBlush.style.display = "block";
}

function closePaymentModalBlush() {
  const orderModal = document.getElementById("paymentModalBlush");
  orderModal.style.display = "none";
}
function openPaynowModalBlush() {
  const orderModalBlush = document.getElementById("payNowBlush");
  orderModalBlush.style.display = "block";
}

function closePaynowModalBlush() {
  const orderModalBlush = document.getElementById("submitPayNowBtnBlush");
  orderModalBlush.style.display = "none";
}

function submitPaymentBlush() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalBlush();
}

function submitPaynowbtnBlush() {
  const modalsBlush = document.getElementsByClassName("modal");
  for (const modalBlush of modalsBlush) {
    modalBlush.style.display = "none";
  }

  // Remove the blur effect on the background elements
  const backgroundElementsBlush = document.querySelectorAll(".blur");
  backgroundElementsBlush.forEach((element) => {
    element.classList.remove("blur-background");
    element.classList.remove("unselectable");
    element.style.pointerEvents = "auto";
  });

  // Clear the selected Blush array and remove the Blush from the addToCart section
  selectedBlushArray = [];
  const addToCartSectionBlush = document.querySelector(".addToCartBlush");
  addToCartSectionBlush.innerHTML = "";
  localStorage.removeItem("selectedBlushArray"); // Clear local storage

  toggleCartModalBlush();
}

//............................ Concealer Js Here...........................//

let selectedConcealerArray = [];
function showConcealerSection(sectionId, button) {
  // Hide all sections

  const sectionsConcealer = document.querySelectorAll(".concealerContent");
  sectionsConcealer.forEach((section) => {
    section.style.display = "none";
  });

  // Remove the "selected Lipstick Container Categories" class from all buttons
  const buttonsConcealer = document.querySelectorAll(
    ".concealerContainerCategories a"
  );
  buttonsConcealer.forEach((btn) => {
    btn.classList.remove("selectedConcealer");
  });

  // Show the selected section
  const selectedSectionConcealer = document.getElementById(sectionId);
  if (selectedSectionConcealer) {
    selectedSectionConcealer.style.display = "flex";
    localStorage.setItem("selectedSectionConcealer", sectionId);
  }

  // Add the "selected  Concealer Categories" class to the clicked button
  if (button) {
    button.classList.add("selectedConcealer");
    localStorage.setItem(
      "selectedButtonconcealer",
      button.getAttribute("href")
    );
  }
  window.history.pushState(null, `#concealer${sectionId}`);
}

// Store the selectd  lipstick section and selected listick hover button in local storage
const storedSectionconcealer = localStorage.getItem("selectedSectionConcealer");
const storedButtonconcealer = localStorage.getItem("selectedButtonconcealer");

if (storedSectionconcealer) {
  showConcealerSection(storedSectionconcealer);
}

// Restore the selected Concealer Container Categories and selected buttons border after the page is refreshed
if (storedButtonconcealer) {
  const buttonsConcealer = document.querySelectorAll(
    ".concealerContainerCategories a"
  );
  buttonsConcealer.forEach((btn) => {
    if (btn.getAttribute("href") === storedButtonconcealer) {
      btn.classList.add("selectedConcealer");
    }
  });
}

// Helper function to display the selected Concealer in the addToCart section
function displaySelectedConcealer(img, icon, title, price, index) {
  const addToCartSectionConcealer = document.querySelector(
    ".addToCartConcealer"
  );

  // Create a new div to hold each selected Concealer
  const selectedConcealerDiv = document.createElement("div");
  selectedConcealerDiv.classList.add("selectedConcealerInfo");

  // Populate the div with the selected Concealer data
  selectedConcealerDiv.innerHTML = `
    <div class="lipstickInfo">
      <img class="addToCartImg" src="${img}" />
      <img class="addToCartIcon" src="${icon}" />
      <div class="Concealer_Details">
        <h4>${title}</h4>
        <p>${price}</p>
      </div>
      <div class="deleteButtonconcealer" data-index="${index}">
        <img class="delete_icon" src="/Images/Icons/detele_Icon.png" />
      </div>
    </div>
  `;

  const deleteButtonconcealer = selectedConcealerDiv.querySelector(
    ".deleteButtonconcealer"
  );
  deleteButtonconcealer.addEventListener("click", () => {
    // Get the index of the selected Concealer from the data-index attribute
    const indexToRemoveConcealer = parseInt(
      deleteButtonconcealer.getAttribute("data-index"),
      10
    );

    // Remove the selected Concealer from the array and update the display
    removeSelectedConcealer(selectedConcealerDiv, indexToRemoveConcealer);
  });

  // Append the div to the addToCartSection
  addToCartSectionConcealer.appendChild(selectedConcealerDiv);
}

function removeSelectedConcealer(selectedConcealerDiv, indexToRemoveConcealer) {
  const addToCartSectionConcealer = document.querySelector(
    ".addToCartConcealer"
  );

  // Remove the selected Concealer div from the addToCartSection
  addToCartSectionConcealer.removeChild(selectedConcealerDiv);
  // cartItemsContainer.removeChild(cartItemDiv);

  // Remove the selected Concealer from the array
  selectedConcealerArray.splice(indexToRemoveConcealer, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedConcealerArray",
    JSON.stringify(selectedConcealerArray)
  );
  generateCartModelConcealerContent();
}

function removeSelectedCartConcealer(
  cartItemConcealerDiv,
  indexToRemoveConcealer
) {
  const cartItemsContainerConcealer = document.querySelector(
    ".cart-items-Concealer"
  );
  const addToCartSectionConcealer = document.querySelector(
    ".addToCartConcealer"
  );

  // Remove the selected Concealer div from the cart-items section
  cartItemsContainerConcealer.removeChild(cartItemConcealerDiv);

  // Remove the selected Concealer div from the addToCart section
  const addToCartItemsConcealer = addToCartSectionConcealer.querySelectorAll(
    ".selectedConcealerInfo"
  );
  if (addToCartItemsConcealer.length > indexToRemoveConcealer) {
    addToCartSectionConcealer.removeChild(
      addToCartItemsConcealer[indexToRemoveConcealer]
    );
  }

  // Remove the selected Concealer from the array
  selectedConcealerArray.splice(indexToRemoveConcealer, 1);

  // Update the stored array in localStorage
  localStorage.setItem(
    "selectedConcealerArray",
    JSON.stringify(selectedConcealerArray)
  );

  // Regenerate the cart items and update the total price in the modal
  generateCartModelConcealerContent();
}

function handleConcealerImageClick(img, icon, title, price) {
  // Clear local storage and the UI if a Concealer is already selected
  if (selectedConcealerArray?.length > 0) {
    selectedConcealerArray = [];
    const addToCartSectionConcealer = document.querySelector(
      ".addToCartConcealer"
    );
    addToCartSectionConcealer.innerHTML = "";
    localStorage.removeItem("selectedConcealerArray"); // Clear local storage
  }

  // Call the function to display the selected Concealer in the addToCart section
  displaySelectedConcealer(
    img,
    icon,
    title,
    price,
    selectedConcealerArray.length
  );

  // Add the selected Concealer data to the array
  const selectedItemData = {
    img: img,
    icon: icon,
    title: title,
    price: price,
  };
  selectedConcealerArray.push(selectedItemData);

  // Store the updated Add to Cart array in localStorage
  localStorage.setItem(
    "selectedConcealerArray",
    JSON.stringify(selectedConcealerArray)
  );
}

function displaySelectedConcealerOnLoad() {
  // Retrieve the selected Concealers Add to Cart from localStorage
  const storedConcealer = localStorage.getItem("selectedConcealerArray");
  if (storedConcealer) {
    selectedConcealerArray = JSON.parse(storedConcealer);

    // Display each selected Concealer in the addToCart section
    selectedConcealerArray.forEach((concealerData, index) => {
      displaySelectedConcealer(
        concealerData.img,
        concealerData.icon,
        concealerData.title,
        concealerData.price,
        index
      );
    });
  }
}

displaySelectedConcealerOnLoad();

function generateMatteConcealerContent() {
  const matteConcealerContainer = document.getElementById("concealer_liquid");

  const mateConcealerHTML = ConcealerLiquid.map(
    (item) => `
    <div class="lipstickItem"  
    onclick="handleConcealerImageClick( '${item.img}',
    '${item.icon}', '${item.title}', '${item.price}')" >
      <img class="img" src=${item.img} />
      <img class="icon" src="${item.icon}"/>
      <h3>${item.title}</h3>
      <p>${item.content}</p>
    </div>
  `
  ).join("");

  matteConcealerContainer.innerHTML = mateConcealerHTML;
}

generateMatteConcealerContent();

function generateCartModelConcealerContent() {
  const cartItemsContainerConcealer = document.querySelector(
    ".cart-items-Concealer"
  );
  cartItemsContainerConcealer.innerHTML = ""; // Clear previous content

  // Iterate through the selected Concealer array and create HTML elements for each selected Concealer
  selectedConcealerArray.forEach((ItemData, index) => {
    const cartItemDivConcealer = document.createElement("div");
    cartItemDivConcealer.classList.add("cart-item-Concealer");
    cartItemDivConcealer.innerHTML = `
      <div class="cart-item-info">
        <img class="cart-item-img" src="${ItemData.img}" />
        <img class="cart-item-icon" src="${ItemData.icon}" />
        <h4>${ItemData.title}</h4>
        <p>${ItemData.price}</p>
      </div>
      <div class="deleteButtonCartConcealer" data-index="${index}"><img class="delete_icon" src="/Images/Icons/detele_Icon.png" /></div>
    </div>
  `;

    const deleteCartButtonConcealer = cartItemDivConcealer.querySelector(
      ".deleteButtonCartConcealer"
    );
    deleteCartButtonConcealer.addEventListener("click", () => {
      // Get the index of the selected Concealer from the data-index attribute
      const indexToRemoveConcealer = parseInt(
        deleteCartButtonConcealer.getAttribute("data-index"),
        10
      );
      // Call the function to remove the selected Concealer from the array and update the display
      removeSelectedCartConcealer(cartItemDivConcealer, indexToRemoveConcealer);
    });

    cartItemsContainerConcealer.appendChild(cartItemDivConcealer);
  });

  // Calculate and display the total price
  const totalPriceElementConcealer = document.getElementById(
    "totalPriceconcealer"
  );
  let totalPriceConcealer = 0;
  selectedConcealerArray.forEach((Concealer) => {
    totalPriceConcealer += parseInt(Concealer.price.slice(1));
  });
  totalPriceElementConcealer.textContent = `$${totalPriceConcealer}`;
}

// Call the function when the DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  //   // For Concealer Container Categories

  const storedSectionConcealer = localStorage.getItem(
    "selectedSectionConcealer"
  );
  const storedButtonConcealer = localStorage.getItem("selectedButtonConcealer");
  if (storedSectionConcealer && storedButtonConcealer) {
    const selectedButtonlipstick = document.querySelector(
      `.concealerContainerCategories a[href="${storedButtonConcealer}"]`
    );
    showConcealerSection(storedSectionConcealer, selectedButtonlipstick);
  } else {
    showConcealerSection("concealer_liquid"); // Default selection if no data is stored
    // Add the border to the default Concealer buttton "Concealer"
    const defaultSelectedConcealer = document.querySelector(
      '.concealerContainerCategories a[href="#concealer_liquid"]'
    );
    defaultSelectedConcealer.classList.add("selectedConcealer");
  }
  generateCartModelConcealerContent();

  //   // Event listener to open the modal when the "Add to Cart" button is clicked
  const addToCartButtonConcealer = document.querySelector(
    ".addToCartButtonConcealer"
  );
  addToCartButtonConcealer.addEventListener("click", () => {
    if (selectedConcealerArray?.length === 0) {
      const emptyCartMessage = document.getElementById(
        "emptyCartModalConcealer"
      );
      emptyCartMessage.style.display = "block";

      // Hide the message after a short delay
      setTimeout(() => {
        emptyCartMessage.style.display = "none";
      }, 2000);
    } else {
      openCartModalConcealer();
      toggleCartModalConcealer();
    }
  });
});

document.addEventListener("DOMContentLoaded", () => {
  const sidebarMainContainer = document.querySelector(".Sidebar_MainContainer");
  const toggleButtonConcealer = document.createElement("div");
  toggleButtonConcealer.classList.add("toggle-button");
  toggleButtonConcealer.innerHTML = `
    <div class="toggle-line-Concealer"></div>
    <div class="toggle-line-Concealer"></div>
    <div class="toggle-line-Concealer"></div>
  `;

  document.body.appendChild(toggleButtonConcealer);

  function addToggleLinesConcealer() {
    const toggleLines = toggleButtonConcealer.querySelectorAll(
      ".toggle-line-Concealer"
    );
    toggleLines.forEach((line) => {
      line.style.display = "block";
    });
  }

  function addArrowButtonConcealer() {
    const arrowButton = document.createElement("div");
    arrowButton.classList.add("arrow-button-Concealer");
    arrowButton.innerHTML = "&#8592;";
    toggleButtonConcealer.appendChild(arrowButton);
  }

  function removeArrowButtonConcealer() {
    const arrowButton = toggleButtonConcealer.querySelector(
      ".arrow-button-Concealer"
    );
    if (arrowButton) {
      toggleButton.removeChild(arrowButton);
    }
  }

  function removeToggleLinesConcealer() {
    const toggleLines = toggleButtonConcealer.querySelectorAll(
      ".toggle-line-Concealer"
    );
    toggleLines.forEach((line) => {
      line.style.display = "none";
    });
  }
  toggleButtonConcealer.addEventListener("click", () => {
    sidebarMainContainer.classList.toggle("active");

    if (sidebarMainContainer.classList.contains("active")) {
      removeToggleLinesConcealer();
      addArrowButtonConcealer();
    } else {
      removeArrowButtonConcealer();
      addToggleLinesConcealer();
    }
  });
});

function closeAndToggleCartModalConcealer() {
  closeCartModalConcealer();
  toggleCartModalConcealer();
}

// Function to toggle the blur effect on the background elements
function toggleBlurBackgroundConcealer() {
  const cartModalConcealer = document.getElementById("cartModalConcealer");
  const backgroundElements = document.querySelectorAll(".blur");

  function handleBackgroundConcealerClick(event) {
    if (event.target === cartModalConcealer) {
      closeAndToggleCartModalConcealer();
    }
  }

  if (cartModalConcealer.classList.contains("active")) {
    backgroundElements.forEach((element) => {
      element.classList.add("blur-background");
      element.classList.add("unselectable");
      element.style.pointerEvents = "none";
      element.addEventListener("click", handleBackgroundConcealerClick);
    });
  } else {
    backgroundElements.forEach((element) => {
      element.classList.remove("blur-background");
      element.classList.remove("unselectable");
      element.style.pointerEvents = "auto";
      element.removeEventListener("click", handleBackgroundConcealerClick);
    });
  }
}

window.addEventListener("click", (event) => {
  const cartModalConcealer = document.getElementById("bbbb");
  // Check if the clicked element is outside the modal
  if (event.target == cartModalConcealer) {
    closeCartModalConcealer();
    toggleCartModalConcealer();
  }
});

// Function to open the cart modal
function openCartModalConcealer() {
  const cartModal = document.getElementById("cartModalConcealer");
  cartModal.style.display = "block";
  document.body.style.overflow = "hidden";
  toggleBlurBackgroundConcealer();
  generateCartModelConcealerContent();
}
function closeEmptyCartModalConcealer() {
  const emptyCartModal = document.getElementById("emptyCartModalConcealer");
  emptyCartModal.style.display = "none";
}

// Event listener to open the modal when the "Add to Cart" button is clicked
document.addEventListener("DOMContentLoaded", () => {
  const addToCartButtonConcealer = document.querySelector(
    ".addToCartButtonConcealer"
  );
  addToCartButtonConcealer.addEventListener("click", () => {
    if (selectedConcealerArray.length <= 0) {
      const emptyCartModalConcealer = document.getElementById(
        "emptyCartModalConcealer"
      );
      emptyCartModalConcealer.style.display = "block";

      setTimeout(() => {
        emptyCartModalConcealer.style.display = "none";
      }, 3000);
    } else {
      openCartModalConcealer();
    }
  });
});

// Function to close the cart modal
function closeCartModalConcealer() {
  const cartModal = document.getElementById("cartModalConcealer");
  cartModal.style.display = "none";
  document.body.style.overflow = "auto";
  toggleBlurBackgroundConcealer();
}

function toggleCartModalConcealer() {
  const cartModalConcealer = document.getElementById("cartModalConcealer");
  const toggleButton = document.querySelector(".toggle-button");
  cartModalConcealer.classList.toggle("active");
  toggleButton.style.display = cartModalConcealer.classList.contains("active")
    ? "none"
    : "block";

  if (cartModalConcealer.classList.contains("active")) {
    cartModal.style.display = "block";
  } else {
    cartModalConcealer.style.display = "none";
  }

  toggleBlurBackgroundConcealer();
}

function toggleOrderModalConcealer() {
  const orderModalConcealer = document.getElementById("orderModalConcealer");
  const toggleButton = document.querySelector(".toggle-button-Concealer");
  orderModalConcealer.classList.toggle("active");
  toggleButton.style.display = orderModalConcealer.classList.contains("active")
    ? "none"
    : "block";

  if (orderModalConcealer.classList.contains("active")) {
    orderModalConcealer.style.display = "block";
  } else {
    orderModalConcealer.style.display = "none";
  }

  toggleBlurBackgroundConcealer();
}
function togglePaymentModalConcealer() {
  const paymentModalConcealer = document.getElementById(
    "paymentModalConcealer"
  );
  const toggleButton = document.querySelector(".toggle-button-Concealer");
  paymentModalConcealer.classList.toggle("active");
  toggleButton.style.display = paymentModalConcealer.classList.contains(
    "active"
  )
    ? "none"
    : "block";

  if (paymentModalConcealer.classList.contains("active")) {
    paymentModalConcealer.style.display = "block";
  } else {
    paymentModalConcealer.style.display = "none";
  }

  toggleBlurBackgroundConcealer();
}

const closeButtonConcealer = document.getElementById("closeConcealer");
closeButtonConcealer.addEventListener("click", () => {
  closeAndToggleCartModalConcealer();
});

const closeArrowCartButtonConcealer = document.querySelector(
  ".ArrowCartConcealer"
);
closeArrowCartButtonConcealer.addEventListener("click", () => {
  closeCartModalConcealer();
  toggleCartModalConcealer();
});
const closeArrowOrderButtonConcealer = document.querySelector(
  ".ArrowOrderConcealer"
);
closeArrowOrderButtonConcealer.addEventListener("click", () => {
  closeOrderModalConcealer();
  removeToggleLinesConcealer();
  toggleOrderModalConcealer();
});
const closeArrowPaymentButtonConcealer = document.querySelector(
  ".ArrowPaymentConcealer"
);
closeArrowPaymentButtonConcealer.addEventListener("click", () => {
  closePaymentModalConcealer();
  removeToggleLinesConcealer();
  togglePaymentModalConcealer();
});

// Function to place the order
function openOrderModalConcealer() {
  // closeCartModal();
  const orderModalConcealer = document.getElementById("orderModalConcealer");
  orderModalConcealer.style.display = "block";
}

function closeOrderModalConcealer() {
  const orderModalConcealer = document.getElementById("orderModalConcealer");
  orderModalConcealer.style.display = "none";
}

function submitOrderConcealer() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalConcealer();
}

function openPaymentModalConcealer() {
  // closeCartModal();
  const orderModalConcealer = document.getElementById("paymentModalConcealer");
  orderModalConcealer.style.display = "block";
}

function closePaymentModalConcealer() {
  const orderModal = document.getElementById("paymentModalConcealer");
  orderModal.style.display = "none";
}
function openPaynowModalConcealer() {
  const orderModalConcealer = document.getElementById("payNowConcealer");
  orderModalConcealer.style.display = "block";
}

function closePaynowModalConcealer() {
  const orderModalConcealer = document.getElementById("payNowConcealer");
  orderModalConcealer.style.display = "none";
}

function submitPaymentConcealer() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  closeOrderModalConcealer();
}

function submitPaynowbtnConcealer() {
  const modalsConcealer = document.getElementsByClassName("modal");
  for (const modalConcealer of modalsConcealer) {
    modalConcealer.style.display = "none";
  }

  // Remove the blur effect on the background elements
  const backgroundElementsConcealer = document.querySelectorAll(".blur");
  backgroundElementsConcealer.forEach((element) => {
    element.classList.remove("blur-background");
    element.classList.remove("unselectable");
    element.style.pointerEvents = "auto";
  });

  // Clear the selected Concealer array and remove the Concealer from the addToCart section
  selectedConcealerArray = [];
  const addToCartSectionConcealer = document.querySelector(
    ".addToCartConcealer"
  );
  addToCartSectionConcealer.innerHTML = "";
  localStorage.removeItem("selectedConcealerArray"); // Clear local storage

  toggleCartModalConcealer();
}
